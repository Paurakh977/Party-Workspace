(()=>{var e={};e.id=435,e.ids=[435],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4969:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>n,routeModule:()=>x,tree:()=>m}),a(9417),a(2029),a(5866);var s=a(3191),r=a(8716),l=a(7922),i=a.n(l),o=a(5231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);a.d(t,c);let m=["",{children:["forms",{children:["updateMembersForm",{children:["[memberId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9417)),"/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/forms/updateMembersForm/[memberId]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],n=["/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/forms/updateMembersForm/[memberId]/page.tsx"],d="/forms/updateMembersForm/[memberId]/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/forms/updateMembersForm/[memberId]/page",pathname:"/forms/updateMembersForm/[memberId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},1551:(e,t,a)=>{Promise.resolve().then(a.bind(a,2987))},2987:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(326),r=a(7577),l=a(5048),i=a(19),o=a(4099),c=a(9314),m=a(5047);let n=({memberId:e})=>{let t=(0,m.useRouter)(),[a,l]=(0,r.useState)([]),[i,n]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[b,h]=(0,r.useState)(null),[f,g]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),[I,C]=(0,r.useState)(""),[M,S]=(0,r.useState)(""),[E,F]=(0,r.useState)(""),[P,q]=(0,r.useState)(""),[$,T]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let t=await o.Z.get("http://localhost:3000/committees");console.log("Fetched committees:",t.data),l(t.data),console.log("memberId:",e)}catch(e){console.error("Error fetching committees:",e)}})()},[]),(0,r.useEffect)(()=>{console.log(e),e&&(async()=>{try{let t=(await o.Z.get(`http://localhost:3000/members/${e}`)).data;console.log("Fetched member:",t),h(t),g(t.committeeId||""),j(t.subCommitteeId||""),N(t.levelId||""),k(t.positionId||""),C(t.province||""),S(t.district||""),F(t.municipality||""),q(t.ward||""),T(t.remarks||"")}catch(e){console.error("Error fetching member data:",e)}})()},[e]),(0,r.useEffect)(()=>{(async()=>{if(f)try{let e=await o.Z.get(`http://localhost:3000/sub-committees/committee/${f}`);console.log("Fetched sub-committees:",e.data),n(e.data)}catch(e){console.error("Error fetching sub-committees:",e)}})()},[f]),(0,r.useEffect)(()=>{(async()=>{if(f||v)try{let e="";if(v?e=`http://localhost:3000/sub-level/sub-committee/${v}`:f&&(e=`http://localhost:3000/sub-level/committee/${f}`),e){let t=(await o.Z.get(e)).data.map(e=>e.levelId);if(console.log("Fetched level IDs:",t),t.length>0){let e=(await o.Z.get("http://localhost:3000/levels")).data.filter(e=>t.includes(e.levelId));console.log("Filtered levels:",e),u(e)}else u([])}else u([])}catch(e){console.error("Error fetching levels:",e)}else u([])})()},[v,f]),(0,r.useEffect)(()=>{(async()=>{if(f||v)try{let e="";if(v?e=`http://localhost:3000/structures/subcommittee/${v}`:f&&(e=`http://localhost:3000/structures/committee/${f}`),e){let t=(await o.Z.get(e)).data.map(e=>e.positionId);if(console.log("Fetched position IDs:",t),t.length>0){let e=t.map(e=>o.Z.get(`http://localhost:3000/positions/${e}`)),a=(await Promise.all(e)).map(e=>e.data);console.log("Filtered positions:",a),p(a)}else p([])}else p([])}catch(e){console.error("Error fetching positions:",e)}else p([])})()},[w]);let _=async a=>{if(a.preventDefault(),!b)return;let s={memberName:b.memberName,mobileNumber:b.mobileNumber,email:b.email,committeeId:""!==f?f:null,subCommitteeId:""!==v?v:null,levelId:""!==w?w:null,positionId:""!==y?y:null,province:I,district:M,municipality:E,ward:P,remarks:$};console.log("Submitting payload:",s);try{await o.Z.put(`http://localhost:3000/members/${e}`,s),console.log("Member updated successfully"),t.push("/tables/membersTable")}catch(e){console.error("Error updating member:",e)}};return e&&b?(0,s.jsxs)("div",{className:"w-fit rounded border  bg-rose-100 shadow  dark:bg-boxdark",children:[s.jsx("div",{className:"rounded border-b bg-rose-200 px-7 py-4 shadow ",children:s.jsx("h3",{className:"font-medium text-black dark:text-white",children:"सदस्य विवरण अद्यावधिक गर्नुहोस्"})}),s.jsx("div",{className:"p-7",children:(0,s.jsxs)("form",{onSubmit:_,children:[(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"memberName",children:"नाम:"}),s.jsx("input",{type:"text",id:"memberName",value:b.memberName,onChange:e=>h(t=>t?{...t,memberName:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"mobileNumber",children:"मोबाइल नम्बर:"}),s.jsx("input",{type:"text",id:"mobileNumber",value:b.mobileNumber,onChange:e=>h(t=>t?{...t,mobileNumber:e.target.value}:null),required:!0,className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"email",children:"ईमेल:"}),s.jsx("input",{type:"text",id:"email",value:b.email,onChange:e=>h(t=>t?{...t,email:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"email",children:"प्रतिनिधि:"}),s.jsx("input",{type:"text",id:"email",value:b.email,onChange:e=>h(t=>t?{...t,email:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"subCommittee",children:"ठेगाना:"}),s.jsx(c.Z,{initialProvince:b.province,initialDistrict:b.district,initialMunicipality:b.municipality,initialWard:b.ward,onAddressChange:e=>{console.log("Address change detected:",e),C(e.province),S(e.district),F(e.municipality),q(e.ward)}})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"committee",children:"समिति:"}),(0,s.jsxs)("select",{id:"committee",value:f,onChange:e=>g(Number(e.target.value)),className:`w-full rounded border bg-white px-4 py-2 ${""===f?"text-gray-500":"text-black"}`,children:[s.jsx("option",{value:"",children:"समिति चयन गर्नुहोस्"}),a.map(e=>s.jsx("option",{value:e.committeeId,children:e.committeeName},e.committeeId))]})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"subCommittee",children:"उपसमिति:"}),(0,s.jsxs)("select",{id:"subCommittee",value:v,disabled:!f,onChange:e=>j(Number(e.target.value)),className:`w-full rounded border bg-white px-4 py-2 ${""===v?"text-gray-500":"text-black"}${f?"bg-white":"bg-gray-50 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",children:"उपसमिति चयन गर्नुहोस्"}),i.map(e=>s.jsx("option",{value:e.subCommitteeId,children:e.subCommitteeName},e.subCommitteeId))]})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"level",children:"स्तर चयन गर्नुहोस्:"}),(0,s.jsxs)("select",{id:"level",value:w,onChange:e=>N(Number(e.target.value)),className:"border-gray-300 w-full rounded border px-4 py-2 text-black",children:[s.jsx("option",{value:"",children:"स्तर चयन गर्नुहोस्"}),d.map(e=>s.jsx("option",{value:e.levelId,children:e.levelName},e.levelId))]})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"positions",children:"स्थिति चयन गर्नुहोस्:"}),s.jsx("div",{className:"flex flex-wrap",children:x.length>0?x.map(e=>(0,s.jsxs)("div",{className:"mr-4",children:[s.jsx("input",{type:"checkbox",id:`position-${e.positionId}`,value:e.positionId,checked:y===e.positionId,onChange:e=>{k(Number(e.target.value))}}),s.jsx("label",{htmlFor:`position-${e.positionId}`,className:"ml-2 text-sm text-black dark:text-white",children:e.positionName})]},e.positionId)):s.jsx("div",{children:"Positions not available"})})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[s.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"remarks",children:"टिप्पणी:"}),s.jsx("textarea",{id:"remarks",value:$,onChange:e=>T(e.target.value),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),s.jsx("button",{type:"submit",className:"w-full rounded bg-blue-500 py-2 text-white",children:"अद्यावधिक गर्नुहोस्"})]})})]}):s.jsx("div",{children:"Loading..."})},d=({params:e})=>{let t=Array.isArray(e.memberId)?e.memberId[0]:e.memberId;return(0,r.useEffect)(()=>{console.log("params from wrapper:",e.memberId),console.log("params:",e)},[]),s.jsx(l.default,{children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[s.jsx(i.Z,{pageName:"सदस्य विवरण अद्यावधिक गर्नुहोस्"}),s.jsx("div",{children:s.jsx(n,{memberId:t})})]})})}},9314:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(326),r=a(7577);let l=async()=>{try{let[e,t,a,s]=await Promise.all([fetch("/map-province-districts.json"),fetch("/map-districts-municipalities.json"),fetch("/map-municipalities-wards.json"),fetch("/all-provinces.json")]),r=await e.json(),l=await t.json(),i=await a.json(),o=await s.json();return{provinceToDistrictsMap:r,districtsToMunicipalitiesMap:l,municipalitiesToWardsMap:i,allProvinces:o}}catch(e){return console.error("Error fetching address data:",e),{provinceToDistrictsMap:{},districtsToMunicipalitiesMap:{},municipalitiesToWardsMap:{},allProvinces:[]}}},i=({onAddressChange:e,initialProvince:t="",initialDistrict:a="",initialMunicipality:i="",initialWard:o=""})=>{let[c,m]=(0,r.useState)(t),[n,d]=(0,r.useState)(a),[u,x]=(0,r.useState)(i),[p,b]=(0,r.useState)(o),[h,f]=(0,r.useState)({}),[g,v]=(0,r.useState)({}),[j,w]=(0,r.useState)({}),[N,y]=(0,r.useState)([]),[k,I]=(0,r.useState)([]),[C,M]=(0,r.useState)([]),[S,E]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{let e=await l();f(e.provinceToDistrictsMap),v(e.districtsToMunicipalitiesMap),w(e.municipalitiesToWardsMap),y(e.allProvinces),t&&e.provinceToDistrictsMap[t]&&I(e.provinceToDistrictsMap[t]),a&&e.districtsToMunicipalitiesMap[a]&&M(e.districtsToMunicipalitiesMap[a]),i&&e.municipalitiesToWardsMap[i]&&E(e.municipalitiesToWardsMap[i])})()},[t,a,i]),(0,r.useEffect)(()=>{c?(I(h[c]||[]),a||(d(""),x(""),b(""),M([]),E([]))):(I([]),M([]),E([])),e({province:c,district:"",municipality:"",ward:""})},[c]),(0,r.useEffect)(()=>{n?(M(g[n]||[]),i||(x(""),b(""),E([]))):(M([]),E([])),e({province:c,district:n,municipality:"",ward:""})},[n]),(0,r.useEffect)(()=>{u?(E(j[u]||[]),o||b("")):E([]),e({province:c,district:n,municipality:u,ward:""})},[u]),(0,r.useEffect)(()=>{e({province:c,district:n,municipality:u,ward:p})},[p]),s.jsx("div",{className:"flex flex-col gap-6",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"text-small mb-1 block rounded border border-black bg-slate-400 text-center font-medium text-black dark:text-white",children:"प्रदेश:"}),(0,s.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:`w-fit rounded border bg-white px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ${""===c?"text-gray-500":"text-black"}`,children:[s.jsx("option",{value:"",className:"text-gray-500",children:"प्रदेश छान्नुहोस्"}),N.map(e=>s.jsx("option",{value:e,className:"text-black",children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"जिल्ला:"}),(0,s.jsxs)("select",{value:n,onChange:e=>d(e.target.value),disabled:!c,className:`w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ${""===n?"text-gray-500":"text-black"} ${c?"bg-white":"bg-gray-50 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",className:"text-gray-500",children:"जिल्ला छान्नुहोस्"}),k.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"पालिका:"}),(0,s.jsxs)("select",{value:u,onChange:e=>x(e.target.value),disabled:!n,className:`w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none  dark:bg-meta-4 dark:text-white ${""===u?"text-gray-500":"text-black"} ${n?"bg-white":"bg-gray-50 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",className:"text-gray-500",children:"पालिका छान्नुहोस्"}),C.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"वडा:"}),(0,s.jsxs)("select",{value:p,onChange:e=>b(e.target.value),disabled:!u,className:`w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ${""===p?"text-gray-500":"text-black"} ${u?"bg-white":"bg-gray-50 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",className:"text-gray-500",children:"वडा छान्नुहोस्"}),S.map(e=>s.jsx("option",{value:e,children:e},e))]})]})]})})}},19:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(326),r=a(434);let l=({pageName:e})=>(0,s.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:e}),s.jsx("nav",{children:(0,s.jsxs)("ol",{className:"flex items-center gap-2",children:[s.jsx("li",{children:s.jsx(r.default,{className:"font-medium",href:"/",children:"गृह पृष्ठ /"})}),s.jsx("li",{className:"font-medium text-primary",children:e})]})})]})},9417:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/forms/updateMembersForm/[memberId]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,110,401,99,984],()=>a(4969));module.exports=s})();