(()=>{var e={};e.id=716,e.ids=[716],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7047:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>n,routeModule:()=>b,tree:()=>c}),r(9926),r(2029),r(5866);var a=r(3191),s=r(8716),l=r(7922),o=r.n(l),d=r(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let c=["",{children:["tables",{children:["membersTable",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9926)),"/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/tables/membersTable/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],n=["/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/tables/membersTable/page.tsx"],m="/tables/membersTable/page",x={require:r,loadChunk:()=>Promise.resolve()},b=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/tables/membersTable/page",pathname:"/tables/membersTable",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6072:(e,t,r)=>{Promise.resolve().then(r.bind(r,2047))},2047:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(326);r(7577);var s=r(5048),l=r(19),o=r(5657);let d=()=>a.jsx(s.default,{children:(0,a.jsxs)("div",{className:"mx-auto px-4 py-8",children:[a.jsx(l.Z,{pageName:"समिति तालिका"}),a.jsx("div",{children:a.jsx(o.Z,{})})]})})},19:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(326),s=r(434);let l=({pageName:e})=>(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:e}),a.jsx("nav",{children:(0,a.jsxs)("ol",{className:"flex items-center gap-2",children:[a.jsx("li",{children:a.jsx(s.default,{className:"font-medium",href:"/",children:"गृह पृष्ठ /"})}),a.jsx("li",{className:"font-medium text-primary",children:e})]})})]})},5657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(326),s=r(7577),l=r(4099),o=r(5047),d=r(622);let i=({singleMember:e})=>{let[t,r]=(0,s.useState)([]),[i,c]=(0,s.useState)({}),[n,m]=(0,s.useState)({}),[x,b]=(0,s.useState)([]),[p,u]=(0,s.useState)([]),[h,y]=(0,s.useState)({}),[g,f]=(0,s.useState)([]),[j,N]=(0,s.useState)(!0),[w,v]=(0,s.useState)(null),k=(0,o.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{N(!0),v(null);let e=await l.Z.get("http://localhost:3000/committees");r(e.data);let t=(await l.Z.get("http://localhost:3000/levels")).data.reduce((e,t)=>({...e,[t.levelId]:t.levelName}),{});m(t);let a=(await Promise.all(e.data.map(async e=>{try{let t=await l.Z.get(`http://localhost:3000/sub-committees/committee/${e.committeeId}`);return{[e.committeeId]:t.data}}catch{return{[e.committeeId]:[]}}}))).reduce((e,t)=>({...e,...t}),{});c(a);let s=await l.Z.get("http://localhost:3000/sub-level");b(s.data);let o=await Promise.all(e.data.flatMap(async e=>{try{let t=(await l.Z.get(`http://localhost:3000/structures/committee/${e.committeeId}`)).data,r=(await Promise.all((i[e.committeeId]||[]).map(async e=>l.Z.get(`http://localhost:3000/structures/subcommittee/${e.subCommitteeId}`)))).flatMap(e=>e.data);return[...t,...r]}catch{return[]}}));u(o.flat());let d=Array.from(new Set(o.flat().map(e=>e.positionId))),n=(await Promise.all(d.map(e=>l.Z.get(`http://localhost:3000/positions/${e}`)))).reduce((e,t)=>({...e,[t.data.positionId]:t.data.positionName}),{});y(n);let x=await l.Z.get("http://localhost:3000/members");f(x.data)}catch(e){console.error("Error fetching data:",e),v("Failed to load data.")}finally{N(!1)}})()},[]);let I=(e,t)=>x.filter(r=>r.committeeId===e&&(null===t||r.subCommitteeId===t)).map(e=>n[e.levelId]||"-").join(", ")||"-",P=e=>e&&h[e]||"-",q=e=>{let{municipality:t,ward:r,district:a,province:s,address:l}=e;return l?`${t} - ${r}, ${a} जिल्ला, ${s} प्रदेश, ${l}`:`${t} - ${r}, ${a}`},C=async e=>{try{await l.Z.delete(`http://localhost:3000/members/${e}`),f(t=>t.filter(t=>t.memberId!==e))}catch(e){console.error("Error deleting member:",e)}},_=e=>{console.log("Updating member with ID:",e),k.push(`/forms/updateMembersForm/${e}`)};return j?a.jsx("p",{children:"Loading data..."}):w?a.jsx("p",{className:"text-red-500",children:w}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("div",{className:"border-gray-700 dark:border-gray-700 min-w-[1500px] rounded-sm border bg-rose-100 p-6 px-5 pb-2.5 pt-6 shadow dark:bg-boxdark sm:rounded-lg sm:px-7.5 xl:pb-1",children:[a.jsx("h4",{className:"mb-6  text-xl font-semibold text-black dark:text-white",children:a.jsx("span",{className:"bg-lime-600",children:"सदस्य तालिका"})}),(0,a.jsxs)("table",{className:"min-w-full table-auto",children:[a.jsx("thead",{className:"dark:bg-gray-700",children:(0,a.jsxs)("tr",{className:"bg-slate-400",children:[a.jsx("th",{className:"border-gray-700 w-2 border-2 px-4 py-2 font-bold text-black",children:"क्रम संख्या"}),a.jsx("th",{className:"border-gray-700 w-45 border-2 px-4 py-2 font-bold text-black",children:"नामथर"}),a.jsx("th",{className:"border-gray-700 w-50 border-2 px-4 py-2 font-bold text-black",children:"ठेगाना"}),a.jsx("th",{className:"border-gray-700 w-30 border-2 px-4 py-2 font-bold text-black",children:"मोबाइल नम्बर"}),a.jsx("th",{className:"border-gray-700 w-50 border-2 px-4 py-2 font-bold text-black",children:"ईमेल"}),a.jsx("th",{className:"border-gray-700 w-25 border-2 px-4 py-2 font-bold text-black",children:"समिति"}),a.jsx("th",{className:"border-gray-700 w-35 border-2 px-4 py-2 font-bold text-black",children:"उप-समिति"}),a.jsx("th",{className:"border-gray-700 w-45 border-2 px-4 py-2 font-bold text-black",children:"तह"}),a.jsx("th",{className:"border-gray-700 w-35 border-2 px-4 py-2 font-bold text-black",children:"पद"}),a.jsx("th",{className:"border-gray-700 w-20 border-2 px-4 py-2 font-bold text-black",children:"कैफियत"}),a.jsx("th",{className:"border-gray-700 w-20 border-2 px-4 py-2 font-bold text-black",children:"सुधार"})]})}),a.jsx("tbody",{children:(e?[e]:g).map((e,r)=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:r+1}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:e.memberName}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:q(e)}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:e.mobileNumber}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:e.email}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:t.find(t=>t.committeeId===e.committeeId)?.committeeName||"-"}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:e.subCommitteeId&&i[e.committeeId]?.find(t=>t.subCommitteeId===e.subCommitteeId)?.subCommitteeName||"-"}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:I(e.committeeId,e.subCommitteeId||null)}),a.jsx("td",{className:"border-gray-700 border-2 px-4 py-2 text-center text-black",children:P(e.positionId)}),a.jsx("td",{className:"border-2 px-4 py-2 text-center text-black",children:e.remarks}),(0,a.jsxs)("td",{className:"border-gray-700 border-2 px-4 py-2 text-center",children:[a.jsx("button",{onClick:()=>_(e.memberId),className:"mr-2 rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:a.jsx(d.fmQ,{})}),a.jsx("button",{onClick:()=>C(e.memberId),className:"mr-2 rounded bg-rose-500 px-4 py-2 text-white hover:bg-rose-600",children:a.jsx(d.Xm5,{})})]})]},e.memberId))})]})]})})}},9926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/home/ayushbhattarai/Development/Encraft/NC Campaign/frontend/src/app/tables/membersTable/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,110,401,99,622,984],()=>r(7047));module.exports=a})();