"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/nepali-datepicker-reactjs";
exports.ids = ["vendor-chunks/nepali-datepicker-reactjs"];
exports.modules = {

/***/ "(ssr)/./node_modules/nepali-datepicker-reactjs/dist/index.modern.js":
/*!*********************************************************************!*\
  !*** ./node_modules/nepali-datepicker-reactjs/dist/index.modern.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NepaliDatePicker: () => (/* binding */ NepaliDatePickerWrapper)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bikram-sambat-js */ \"(ssr)/./node_modules/bikram-sambat-js/dist/index.es.js\");\n/* harmony import */ var nepali_number__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nepali-number */ \"(ssr)/./node_modules/nepali-number/dist/index.es.js\");\n\n\n\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar ENGLISH = \"en\";\nvar NEPALI = \"ne\";\nvar BS = \"BS\";\nvar parsedDateInitialValue = {\n  adDate: new Date(),\n  bsDay: 0,\n  bsMonth: 0,\n  bsYear: 0,\n  firstAdDayInBSMonth: new Date(),\n  numberOfDaysInBSMonth: 0,\n  weekDay: 0\n};\n\nvar SET_CONFIG = \"set_config\";\n\nvar initialState = function initialState(minYear, maxYear) {\n  return {\n    currentLocale: NEPALI,\n    minYear: minYear != null ? minYear : 2000,\n    maxYear: maxYear != null ? maxYear : 2100\n  };\n};\n\nvar ConfigReducer = function ConfigReducer(state, action) {\n  if (state === void 0) {\n    state = initialState();\n  }\n\n  if (action.type === SET_CONFIG) {\n    var _extends2;\n\n    return _extends({}, state, (_extends2 = {}, _extends2[action.key] = action.value, _extends2));\n  }\n\n  return state;\n};\n\nvar ConfigContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  dispatch: function dispatch() {\n    return null;\n  },\n  state: initialState()\n});\n\nvar ConfigProvider = function ConfigProvider(_ref) {\n  var children = _ref.children,\n      minYear = _ref.minYear,\n      maxYear = _ref.maxYear;\n\n  var _useReducer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(ConfigReducer, initialState(minYear, maxYear)),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var contextValue = {\n    state: state,\n    dispatch: dispatch\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ConfigContext.Provider, {\n    value: contextValue\n  }, children);\n};\n\nvar useConfig = function useConfig() {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ConfigContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  function setConfig(key, value) {\n    dispatch({\n      key: key,\n      type: SET_CONFIG,\n      value: value\n    });\n  }\n\n  function getConfig(key) {\n    return state[key];\n  }\n\n  return {\n    setConfig: setConfig,\n    getConfig: getConfig\n  };\n};\n\nvar CalenderConfig = {\n  maxBSYear: 2100,\n  minBSYear: 1970,\n  outputSeparator: \"-\"\n};\n\nvar months = {\n  en: [\"Baisakh\", \"Jestha\", \"Asar\", \"Shrawan\", \"Bhadra\", \"Asoj\", \"Kartik\", \"Mangsir\", \"Pouse\", \"Magh\", \"Falgun\", \"Chaitra\"],\n  ne: [\"बैशाख\", \"जेठ\", \"असार\", \"सावन\", \"भदौ\", \"असोज\", \"कार्तिक\", \"मंसिर\", \"पौष\", \"माघ\", \"फागुन\", \"चैत\"]\n};\nvar weeks = {\n  en: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  ne: [\"आईत\", \"सोम\", \"मंगल\", \"बुध\", \"बिही\", \"शुक्र\", \"शनि\"]\n};\nvar minBSYear = 1970;\nvar bsMonthMaxDays = [[30, 31], [31, 32], [31, 32], [31, 32], [31, 32], [30, 31], [29, 30], [29, 30], [29, 30], [29, 30], [29, 30], [30, 31]];\nvar bsMonthCalculatedData = [[0, 1, 1, 22, 1, 3, 1, 1, 1, 3, 1, 22, 1, 3, 1, 3, 1, 22, 1, 3, 1, 19, 1, 3, 1, 1, 3, 1, 2, 2, 1, 3, 1], [1, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 2, 2, 2, 3, 2, 2, 2, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 2, 2, 2, 2, 2, 1, 1, 1, 2, 2, 2, 2, 2, 1, 3, 1, 1, 2], [0, 1, 2, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 3, 1, 1, 2], [1, 2, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 2, 2, 1, 3, 1, 2, 2, 2, 1, 2], [59, 1, 26, 1, 28, 1, 2, 1, 12], [0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5, 1, 1, 2, 2, 1, 3, 1, 2, 1, 2], [0, 12, 1, 3, 1, 3, 1, 5, 1, 11, 1, 3, 1, 3, 1, 18, 1, 3, 1, 3, 1, 18, 1, 3, 1, 3, 1, 27, 1, 2], [1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 3, 1, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 15, 2, 4], [0, 1, 2, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 3, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 2, 2, 2, 15, 2, 4], [1, 1, 3, 1, 3, 1, 14, 1, 3, 1, 1, 1, 3, 1, 14, 1, 3, 1, 3, 1, 3, 1, 18, 1, 3, 1, 3, 1, 3, 1, 14, 1, 3, 15, 1, 2, 1, 1], [0, 1, 1, 3, 1, 3, 1, 10, 1, 3, 1, 3, 1, 1, 1, 3, 1, 3, 1, 10, 1, 3, 1, 3, 1, 3, 1, 3, 1, 14, 1, 3, 1, 3, 1, 3, 1, 3, 1, 10, 1, 20, 1, 1, 1], [1, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 3, 1, 3, 1, 2, 2, 2, 2, 2, 2, 2, 1, 3, 1, 3, 1, 20, 3]];\n\nvar validateAdYear = function validateAdYear(year) {\n  var minAdYear = CalenderConfig.minBSYear - 57;\n  var maxAdYear = CalenderConfig.maxBSYear - 57;\n\n  if (year < minAdYear || year > maxAdYear) {\n    throw new RangeError(\"AD year should be in range of \" + minAdYear + \" to \" + maxAdYear);\n  }\n};\nvar validateAdMonth = function validateAdMonth(month) {\n  if (month < 1 || month > 12) {\n    throw new RangeError(\"AD month should be in range of 1 to 12\");\n  }\n};\nvar validateAdDay = function validateAdDay(day) {\n  if (day < 1 || day > 31) {\n    throw new RangeError(\"AD day should be in range of 1 to 31\");\n  }\n};\nvar validateBsYear = function validateBsYear(year) {\n  var midBsYear = CalenderConfig.minBSYear;\n  var maxBsYear = CalenderConfig.maxBSYear;\n\n  if (year < midBsYear || year > maxBsYear) {\n    throw new RangeError(\"BS year should be in range of \" + midBsYear + \" to \" + maxBsYear);\n  }\n};\nvar validateBsMonth = function validateBsMonth(month) {\n  if (month < 1 || month > 12) {\n    throw new RangeError(\"BS month should be in range of 1 to 12\");\n  }\n};\nvar validateBsDay = function validateBsDay(day) {\n  if (day < 1 || day > 32) {\n    throw new RangeError(\"BS day should be in range of 1 to 32\");\n  }\n};\n\nvar range = function range(start, end, step) {\n  if (step === void 0) {\n    step = 1;\n  }\n\n  var list = [];\n\n  for (var i = start; i <= end; i = i + step) {\n    list.push(i);\n  }\n\n  return list;\n};\nvar zeroPad = function zeroPad(num) {\n  return \"\" + (num > 9 ? num : \"0\" + num);\n};\nvar executionDelegation = function executionDelegation(execution, delegatedExecution) {\n  new Promise(function (resolve) {\n    execution();\n    resolve();\n  }).then(function () {\n    delegatedExecution();\n  });\n};\nvar splitDate = function splitDate(date, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n\n  var _date$split = date.split(separator),\n      year = _date$split[0],\n      month = _date$split[1],\n      day = _date$split[2];\n\n  return {\n    day: parseInt(day, 10),\n    month: parseInt(month, 10),\n    year: parseInt(year, 10)\n  };\n};\nvar stitchDate = function stitchDate(date, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n\n  return \"\" + date.year + separator + zeroPad(date.month) + separator + zeroPad(date.day);\n};\nvar validateDateObject = function validateDateObject(date, type) {\n  if (type === void 0) {\n    type = BS;\n  }\n\n  var year = date.year,\n      month = date.month,\n      day = date.day;\n\n  if (type === BS) {\n    validateBsYear(year);\n    validateBsMonth(month);\n    validateBsDay(day);\n    return;\n  }\n\n  validateAdYear(year);\n  validateAdMonth(month);\n  validateAdDay(day);\n};\nvar getNumberOfDaysInBSMonth = function getNumberOfDaysInBSMonth(yearMonth) {\n  var year = yearMonth.year,\n      month = yearMonth.month;\n  validateBsYear(year);\n  validateBsMonth(month);\n  var yearCount = 0;\n  var totalYears = year + 1 - minBSYear;\n  var bsMonthData = bsMonthCalculatedData[month - 1];\n  return bsMonthData.reduce(function (numberOfDays, monthData, index) {\n    if (monthData === 0 || numberOfDays !== 0) {\n      return numberOfDays;\n    }\n\n    var bsMonthUpperDaysIndex = index % 2;\n    yearCount += monthData;\n\n    if (totalYears > yearCount) {\n      return numberOfDays;\n    }\n\n    if (year === 2081 && month === 2) {\n      return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex + 1];\n    }\n\n    if (year === 2081 && month === 3) {\n      return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex - 1];\n    }\n\n    if (year === 2081 && month === 11) {\n      return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex] - 1;\n    }\n\n    if (year === 2081 && month === 12) {\n      return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex] + 1;\n    }\n\n    if (year === 2085 && month === 5 || year === 2088 && month === 5) {\n      return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex] - 2;\n    }\n\n    return bsMonthMaxDays[month - 1][bsMonthUpperDaysIndex];\n  }, 0);\n};\nvar parseBSDate = function parseBSDate(date, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n\n  var _splitDate = splitDate(date, separator),\n      year = _splitDate.year,\n      month = _splitDate.month,\n      day = _splitDate.day;\n\n  validateDateObject({\n    year: year,\n    month: month,\n    day: day\n  });\n  var adDate = new Date((0,bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__.BSToAD)(date));\n  var firstAdDateInBSMonth = new Date((0,bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__.BSToAD)(stitchDate({\n    year: year,\n    month: month,\n    day: 1\n  }, separator)));\n  var numberOfDaysInMonth = getNumberOfDaysInBSMonth({\n    year: year,\n    month: month\n  });\n  return {\n    adDate: adDate,\n    bsDay: day,\n    bsMonth: month,\n    bsYear: year,\n    firstAdDayInBSMonth: firstAdDateInBSMonth,\n    numberOfDaysInBSMonth: numberOfDaysInMonth,\n    weekDay: adDate.getDay()\n  };\n};\nvar childOf = function childOf(childNode, parentNode) {\n  return parentNode.contains(childNode);\n};\n\nvar IconBase = function IconBase(props) {\n  var options = _objectWithoutPropertiesLoose(props, [\"size\", \"viewBoxSize\"]);\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", Object.assign({\n    xmlns: 'http://www.w3.org/2000/svg',\n    xmlnsXlink: 'http://www.w3.org/1999/xlink',\n    width: props.size,\n    height: props.size\n  }, options, {\n    viewBox: \"0 0 \" + props.viewBoxSize + \" \" + props.viewBoxSize\n  }), props.children);\n};\n\nIconBase.defaultProps = {\n  color: \"#6b6b6b\",\n  size: \"16\",\n  viewBoxSize: \"24\"\n};\n\nvar Next = function Next(props) {\n  var rotationOrigin = parseInt(props.size || \"24\", 10) / 2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(IconBase, Object.assign({}, props), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    transform: \"rotate(180 \" + rotationOrigin + \" \" + rotationOrigin + \")\",\n    fill: 'none',\n    fillRule: 'evenodd',\n    stroke: 'currentcolor',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    strokeWidth: '2.4',\n    d: 'M16.283 18.907L9.6 12l6.683-5.438'\n  }));\n};\n\nvar Previous = function Previous(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(IconBase, Object.assign({}, props), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    fill: 'none',\n    fillRule: 'evenodd',\n    stroke: 'currentcolor',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    strokeWidth: '2.4',\n    d: 'M16.283 18.907L9.6 12l6.683-5.438'\n  }));\n};\n\nvar Today = function Today(props) {\n  props = _extends({}, props, {\n    viewBoxSize: \"512\",\n    size: \"15\"\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(IconBase, Object.assign({}, props), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"defs\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    id: 'a',\n    d: 'M468 160H44c-6.6 0-12-5.4-12-12v-36c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48v36c0 6.6-5.4 12-12 12zM44 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H80c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm116 204c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40z'\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    fill: 'none',\n    fillRule: 'evenodd'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"mask\", {\n    id: 'b',\n    fill: '#fff'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"use\", {\n    xlinkHref: '#a'\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"use\", {\n    fill: '#000',\n    fillRule: 'nonzero',\n    xlinkHref: '#a'\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    fill: 'currentcolor',\n    mask: 'url(#b)'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    d: 'M0 0h512v512H0z'\n  }))));\n};\n\nvar translations = {\n  previous: {\n    en: \"Previous\",\n    ne: \"अघिल्लो\"\n  },\n  next: {\n    en: \"Next\",\n    ne: \"अर्को\"\n  },\n  today: {\n    en: \"Today\",\n    ne: \"आज\"\n  }\n};\n\nvar useTrans = function useTrans(currentLocale) {\n  return {\n    trans: function trans(key, locale) {\n      if (!translations.hasOwnProperty(key)) {\n        return key;\n      }\n\n      return translations[key][locale || currentLocale];\n    },\n    numberTrans: function numberTrans(num, locale) {\n      return \"\" + (locale || currentLocale) === ENGLISH ? (0,nepali_number__WEBPACK_IMPORTED_MODULE_2__.nepaliToEnglishNumber)(num) : (0,nepali_number__WEBPACK_IMPORTED_MODULE_2__.englishToNepaliNumber)(num);\n    }\n  };\n};\n\nvar DropDown = function DropDown(_ref) {\n  var options = _ref.options,\n      value = _ref.value,\n      onSelect = _ref.onSelect;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(function () {});\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'drop-down'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'option-wrapper'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"ul\", null, options.map(function (option, index) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n      key: index,\n      className: option.value === value ? \"active\" : \"\",\n      onClick: function onClick() {\n        onSelect(option);\n      }\n    }, option.label);\n  }))));\n};\n\nvar MonthPicker = function MonthPicker(_ref) {\n  var date = _ref.date,\n      onSelect = _ref.onSelect;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      showDropdown = _useState[0],\n      setShowDropdown = _useState[1];\n\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  var currentLocale = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return getConfig(\"currentLocale\");\n  }, [getConfig]);\n  var currentMonth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    var month = date.bsMonth;\n    return {\n      label: months[currentLocale][month - 1],\n      value: month\n    };\n  }, [date, currentLocale]);\n  var monthList = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return months[currentLocale].map(function (month, index) {\n      return {\n        label: month,\n        value: index + 1\n      };\n    });\n  }, [currentLocale]);\n\n  var handleDropdownView = function handleDropdownView(selected) {\n    setShowDropdown(!showDropdown);\n    onSelect(selected.value);\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'control month'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: 'current-month',\n    onClick: function onClick() {\n      return setShowDropdown(!showDropdown);\n    }\n  }, currentMonth.label), showDropdown && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DropDown, {\n    options: monthList,\n    value: currentMonth.value,\n    onSelect: handleDropdownView\n  }));\n};\n\nvar YearPicker = function YearPicker(_ref) {\n  var date = _ref.date,\n      onSelect = _ref.onSelect;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      showDropdown = _useState[0],\n      setShowDropdown = _useState[1];\n\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  var _useTrans = useTrans(getConfig(\"currentLocale\")),\n      numberTrans = _useTrans.numberTrans;\n\n  var currentYear = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    var year = date.bsYear;\n    return {\n      label: numberTrans(year),\n      value: year\n    };\n  }, [date]);\n  var years = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return range(getConfig(\"minYear\"), getConfig(\"maxYear\")).reverse().map(function (year) {\n      return {\n        label: numberTrans(year),\n        value: year\n      };\n    });\n  }, []);\n\n  var handleDropdownView = function handleDropdownView(selected) {\n    setShowDropdown(!showDropdown);\n    onSelect(selected.value);\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'control year'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: 'current-year',\n    onClick: function onClick() {\n      return setShowDropdown(!showDropdown);\n    }\n  }, currentYear.label), showDropdown && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DropDown, {\n    options: years,\n    value: currentYear.value,\n    onSelect: handleDropdownView\n  }));\n};\n\nvar CalenderController = function CalenderController(props) {\n  var onNextMonth = props.onNextMonth,\n      onPreviousMonth = props.onPreviousMonth,\n      calenderDate = props.calenderDate,\n      onToday = props.onToday,\n      onYearSelect = props.onYearSelect,\n      onMonthSelect = props.onMonthSelect;\n\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  var _useTrans = useTrans(getConfig(\"currentLocale\")),\n      trans = _useTrans.trans;\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'calendar-controller'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: 'control icon',\n    title: trans(\"previous\"),\n    onClick: onPreviousMonth\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Previous, null)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'date-indicator'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(MonthPicker, {\n    date: calenderDate,\n    onSelect: onMonthSelect\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(YearPicker, {\n    date: calenderDate,\n    onSelect: onYearSelect\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: 'control icon icon-today',\n    title: trans(\"today\"),\n    onClick: onToday\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Today, {\n    color: '#2096f5'\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: 'control icon',\n    title: trans(\"next\"),\n    onClick: onNextMonth\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Next, null)));\n};\n\nvar DayPickerBody = function DayPickerBody(_ref) {\n  var selectedDate = _ref.selectedDate,\n      date = _ref.calenderDate,\n      onSelect = _ref.onSelect;\n  var weeksInMonth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return Math.ceil((date.firstAdDayInBSMonth.getDay() + date.numberOfDaysInBSMonth) / 7) - 1;\n  }, [date]);\n  var previousMonth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return date.bsMonth - 1 !== 0 ? date.bsMonth - 1 : 12;\n  }, [date]);\n  var previousYear = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return previousMonth === 12 ? date.bsYear - 1 : date.bsYear;\n  }, [previousMonth, date]);\n  var previousMonthDays = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return previousYear >= minBSYear ? getNumberOfDaysInBSMonth({\n      month: previousMonth,\n      year: previousYear\n    }) : 30;\n  }, [previousYear]);\n\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  var _useTrans = useTrans(getConfig(\"currentLocale\")),\n      numberTrans = _useTrans.numberTrans;\n\n  var getDayInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (weekNum, weekDayNum) {\n    var day = weekNum * 7 + weekDayNum - date.firstAdDayInBSMonth.getDay();\n    var month = date.bsMonth;\n    var year = date.bsYear;\n    var isCurrentMonth = true;\n\n    if (day <= 0) {\n      day = previousMonthDays + day;\n      isCurrentMonth = false;\n    } else if (day > date.numberOfDaysInBSMonth) {\n      day = day - date.numberOfDaysInBSMonth;\n      isCurrentMonth = false;\n    }\n\n    var today = splitDate((0,bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__.ADToBS)(new Date()));\n    var isToday = isCurrentMonth ? today.day === day && today.month === date.bsMonth && today.year === date.bsYear : false;\n    var isSelected = isCurrentMonth ? selectedDate.bsDay === day && selectedDate.bsMonth === date.bsMonth && selectedDate.bsYear === date.bsYear : false;\n    return {\n      day: day,\n      month: month,\n      year: year,\n      isCurrentMonth: isCurrentMonth,\n      isToday: isToday,\n      isSelected: isSelected\n    };\n  }, [date, selectedDate, previousMonthDays]);\n  var onDateSelectHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (dayInfo) {\n    if (dayInfo.isCurrentMonth) {\n      onSelect({\n        year: dayInfo.year,\n        month: dayInfo.month,\n        day: dayInfo.day\n      });\n    }\n  }, [onSelect]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tbody\", null, range(0, weeksInMonth).map(function (weekNum) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n      key: weekNum\n    }, range(1, 7).map(function (weekDayNum) {\n      var dayInfo = getDayInfo(weekNum, weekDayNum);\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n        key: weekDayNum,\n        className: \"month-day \" + (dayInfo.isCurrentMonth ? \"current\" : \"disabled\") + \" \" + (dayInfo.isToday ? \"today\" : \"\") + \" \" + (dayInfo.isSelected ? \"selected\" : \"\"),\n        onClick: function onClick() {\n          return onDateSelectHandler(dayInfo);\n        }\n      }, numberTrans(dayInfo.day));\n    }));\n  }));\n};\n\nvar DayPickerHeader = function DayPickerHeader() {\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  var currentLocale = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return getConfig(\"currentLocale\");\n  }, [getConfig]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"thead\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", null, weeks[currentLocale].map(function (weekDay, index) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n      key: index\n    }, weekDay);\n  })));\n};\n\nvar DayPicker = function DayPicker(_ref) {\n  var selectedDate = _ref.selectedDate,\n      calenderDate = _ref.calenderDate,\n      onDaySelect = _ref.onDaySelect;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"table\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DayPickerHeader, null), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DayPickerBody, {\n    selectedDate: selectedDate,\n    calenderDate: calenderDate,\n    onSelect: onDaySelect\n  }));\n};\n\nvar Calender = function Calender(_ref) {\n  var value = _ref.value,\n      events = _ref.events;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      isInitialized = _useState[0],\n      setIsInitialized = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(parsedDateInitialValue),\n      selectedDate = _useState2[0],\n      setSelectedDate = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(parsedDateInitialValue),\n      calenderDate = _useState3[0],\n      setCalenderDate = _useState3[1];\n\n  var _useConfig = useConfig(),\n      getConfig = _useConfig.getConfig;\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var parsedDateValue = parseBSDate(value);\n    setSelectedDate(parsedDateValue);\n    setCalenderDate(parsedDateValue);\n    setIsInitialized(true);\n  }, [value]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (isInitialized) {\n      events.change(stitchDate({\n        year: selectedDate.bsYear,\n        month: selectedDate.bsMonth,\n        day: selectedDate.bsDay\n      }));\n    }\n  }, [selectedDate, isInitialized]);\n  var onPreviousMonthHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    executionDelegation(function () {\n      setCalenderDate(function (date) {\n        var year = date.bsYear;\n        var month = date.bsMonth - 1;\n\n        if (month < 1) {\n          month = 12;\n          year--;\n        }\n\n        if (year < getConfig(\"minYear\") || year > getConfig(\"maxYear\")) {\n          return date;\n        }\n\n        return parseBSDate(stitchDate({\n          day: date.bsDay,\n          month: month,\n          year: year\n        }, \"-\"));\n      });\n    }, function () {\n      if (events.previousMonthSelect) {\n        events.previousMonthSelect({\n          month: calenderDate.bsMonth,\n          year: calenderDate.bsYear\n        });\n      }\n    });\n  }, []);\n  var onNextMonthClickHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    executionDelegation(function () {\n      setCalenderDate(function (date) {\n        var year = date.bsYear;\n        var month = date.bsMonth + 1;\n\n        if (month > 12) {\n          month = 1;\n          year++;\n        }\n\n        return parseBSDate(stitchDate({\n          day: date.bsDay,\n          month: month,\n          year: year\n        }, \"-\"));\n      });\n    }, function () {\n      if (events.nextMonthSelect) {\n        events.nextMonthSelect({\n          year: calenderDate.bsYear,\n          month: calenderDate.bsMonth\n        });\n      }\n    });\n  }, []);\n  var onTodayClickHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var today = parseBSDate((0,bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__.ADToBS)(new Date()));\n    executionDelegation(function () {\n      setCalenderDate(today);\n      setSelectedDate(today);\n    }, function () {\n      if (events.todaySelect) {\n        events.todaySelect({\n          year: today.bsYear,\n          month: today.bsMonth,\n          day: today.bsDay\n        });\n      }\n    });\n  }, []);\n  var onYearSelectHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (year) {\n    executionDelegation(function () {\n      setCalenderDate(parseBSDate(stitchDate({\n        year: year,\n        month: calenderDate.bsMonth,\n        day: calenderDate.bsDay\n      })));\n    }, function () {\n      if (events.yearSelect) {\n        events.yearSelect(year);\n      }\n    });\n  }, [calenderDate]);\n  var onMonthSelectHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (month) {\n    executionDelegation(function () {\n      setCalenderDate(parseBSDate(stitchDate({\n        year: calenderDate.bsYear,\n        month: month,\n        day: calenderDate.bsDay\n      })));\n    }, function () {\n      if (events.monthSelect) {\n        events.monthSelect(month);\n      }\n    });\n  }, [calenderDate]);\n  var onDaySelectHandler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (date) {\n    executionDelegation(function () {\n      var newDate = parseBSDate(stitchDate(date));\n      setCalenderDate(newDate);\n      setSelectedDate(newDate);\n    }, function () {\n      if (events.daySelect) {\n        events.daySelect(date);\n      }\n    });\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'calender'\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: 'calendar-wrapper'\n  }, isInitialized && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CalenderController, {\n    onPreviousMonth: onPreviousMonthHandler,\n    onNextMonth: onNextMonthClickHandler,\n    calenderDate: calenderDate,\n    onToday: onTodayClickHandler,\n    onYearSelect: onYearSelectHandler,\n    onMonthSelect: onMonthSelectHandler\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DayPicker, {\n    selectedDate: selectedDate,\n    calenderDate: calenderDate,\n    onDaySelect: onDaySelectHandler\n  }))));\n};\n\nvar NepaliDatePicker = function NepaliDatePicker(props) {\n  var className = props.className,\n      inputClassName = props.inputClassName,\n      value = props.value,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      options = props.options;\n  var nepaliDatePickerWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var nepaliDatePickerInput = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\"),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      showCalendar = _useState2[0],\n      setShowCalendar = _useState2[1];\n\n  var _useConfig = useConfig(),\n      setConfig = _useConfig.setConfig,\n      getConfig = _useConfig.getConfig;\n\n  var _useTrans = useTrans(getConfig(\"currentLocale\")),\n      numberTrans = _useTrans.numberTrans;\n\n  var toEnglish = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (val) {\n    return numberTrans(val, ENGLISH);\n  }, []);\n  var returnDateValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (val) {\n    return numberTrans(val, options.valueLocale);\n  }, [options.valueLocale]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    setConfig(\"currentLocale\", options.calenderLocale);\n  }, [options.calenderLocale]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    setDate(toEnglish(value || (0,bikram_sambat_js__WEBPACK_IMPORTED_MODULE_1__.ADToBS)(new Date())));\n  }, [value]);\n  var handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (event) {\n    if (nepaliDatePickerWrapper.current && childOf(event.target, nepaliDatePickerWrapper.current)) {\n      return;\n    }\n\n    setShowCalendar(false);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(function () {\n    if (showCalendar) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }\n\n    return function () {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showCalendar]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(function () {\n    if (showCalendar && nepaliDatePickerWrapper.current) {\n      var nepaliDatePicker = nepaliDatePickerWrapper.current.getBoundingClientRect();\n      var screenHeight = window.innerHeight;\n      var calender = nepaliDatePickerWrapper.current.querySelector(\".calender\");\n\n      if (calender) {\n        setTimeout(function () {\n          var calenderHeight = calender.clientHeight;\n\n          if (calenderHeight + nepaliDatePicker.bottom > screenHeight) {\n            if (calenderHeight < nepaliDatePicker.top) {\n              calender.style.bottom = nepaliDatePicker.height + \"px\";\n            }\n          }\n        }, 0);\n      }\n    }\n  }, [showCalendar]);\n  var handleOnChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (changedDate) {\n    executionDelegation(function () {\n      setDate(changedDate);\n    }, function () {\n      if (onChange) {\n        onChange(returnDateValue(changedDate));\n      }\n    });\n  }, [onChange]);\n  var handleOnDaySelect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (selectedDate) {\n    executionDelegation(function () {\n      if (options.closeOnSelect) {\n        setShowCalendar(false);\n      }\n    }, function () {\n      if (onSelect) {\n        onSelect(returnDateValue(stitchDate(selectedDate)));\n      }\n    });\n  }, [onSelect]);\n  var datepickerEvents = {\n    change: handleOnChange,\n    daySelect: handleOnDaySelect,\n    todaySelect: handleOnDaySelect\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: nepaliDatePickerWrapper,\n    className: \"nepali-date-picker \" + className\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", {\n    type: 'text',\n    ref: nepaliDatePickerInput,\n    className: inputClassName,\n    readOnly: true,\n    value: numberTrans(date),\n    onClick: function onClick() {\n      return setShowCalendar(function (visible) {\n        return !visible;\n      });\n    }\n  }), showCalendar && date && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Calender, {\n    value: date,\n    events: datepickerEvents\n  }));\n};\n\nvar NepaliDatePickerWrapper = function NepaliDatePickerWrapper(props) {\n  var calenderOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return _extends({\n      closeOnSelect: true,\n      calenderLocale: NEPALI,\n      valueLocale: ENGLISH\n    }, props.options);\n  }, [props.options]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ConfigProvider, {\n    maxYear: props.maxYear,\n    minYear: props.minYear\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(NepaliDatePicker, Object.assign({}, _extends({}, props, {\n    options: calenderOptions\n  }))));\n};\n\nNepaliDatePickerWrapper.defaultProps = {\n  className: \"\",\n  inputClassName: \"\",\n  value: \"\",\n  onChange: function onChange() {\n    return null;\n  },\n  onSelect: function onSelect() {\n    return null;\n  },\n  options: {}\n};\n\n\n//# sourceMappingURL=index.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmVwYWxpLWRhdGVwaWNrZXItcmVhY3Rqcy9kaXN0L2luZGV4Lm1vZGVybi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtSjtBQUNqRztBQUMyQjs7QUFFN0U7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsdUJBQXVCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCLHdCQUF3QjtBQUM5Qzs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQixvREFBYTtBQUNqQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsaURBQVU7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0Esb0JBQW9CLGlEQUFVO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxzQkFBc0IsVUFBVTtBQUNoQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx3QkFBd0Isd0RBQU07QUFDOUIsc0NBQXNDLHdEQUFNO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7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TCxHQUFHO0FBQ0gsMEJBQTBCLGtEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHLDJCQUEyQiwwREFBbUI7QUFDakQ7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLHdCQUF3Qiw4Q0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsU0FBUywwREFBbUI7QUFDNUI7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUIsbUNBQW1DLGFBQWE7QUFDeEU7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFdUQ7QUFDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcmVlLW5leHRqcy1hZG1pbi1kYXNoYm9hcmQvLi9ub2RlX21vZHVsZXMvbmVwYWxpLWRhdGVwaWNrZXItcmVhY3Rqcy9kaXN0L2luZGV4Lm1vZGVybi5qcz83YjQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VSZWR1Y2VyLCB1c2VDb250ZXh0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVN0YXRlLCB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCBGcmFnbWVudCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQlNUb0FELCBBRFRvQlMgfSBmcm9tICdiaWtyYW0tc2FtYmF0LWpzJztcbmltcG9ydCB7IG5lcGFsaVRvRW5nbGlzaE51bWJlciwgZW5nbGlzaFRvTmVwYWxpTnVtYmVyIH0gZnJvbSAnbmVwYWxpLW51bWJlcic7XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG52YXIgRU5HTElTSCA9IFwiZW5cIjtcbnZhciBORVBBTEkgPSBcIm5lXCI7XG52YXIgQlMgPSBcIkJTXCI7XG52YXIgcGFyc2VkRGF0ZUluaXRpYWxWYWx1ZSA9IHtcbiAgYWREYXRlOiBuZXcgRGF0ZSgpLFxuICBic0RheTogMCxcbiAgYnNNb250aDogMCxcbiAgYnNZZWFyOiAwLFxuICBmaXJzdEFkRGF5SW5CU01vbnRoOiBuZXcgRGF0ZSgpLFxuICBudW1iZXJPZkRheXNJbkJTTW9udGg6IDAsXG4gIHdlZWtEYXk6IDBcbn07XG5cbnZhciBTRVRfQ09ORklHID0gXCJzZXRfY29uZmlnXCI7XG5cbnZhciBpbml0aWFsU3RhdGUgPSBmdW5jdGlvbiBpbml0aWFsU3RhdGUobWluWWVhciwgbWF4WWVhcikge1xuICByZXR1cm4ge1xuICAgIGN1cnJlbnRMb2NhbGU6IE5FUEFMSSxcbiAgICBtaW5ZZWFyOiBtaW5ZZWFyICE9IG51bGwgPyBtaW5ZZWFyIDogMjAwMCxcbiAgICBtYXhZZWFyOiBtYXhZZWFyICE9IG51bGwgPyBtYXhZZWFyIDogMjEwMFxuICB9O1xufTtcblxudmFyIENvbmZpZ1JlZHVjZXIgPSBmdW5jdGlvbiBDb25maWdSZWR1Y2VyKHN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICBzdGF0ZSA9IGluaXRpYWxTdGF0ZSgpO1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfQ09ORklHKSB7XG4gICAgdmFyIF9leHRlbmRzMjtcblxuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIChfZXh0ZW5kczIgPSB7fSwgX2V4dGVuZHMyW2FjdGlvbi5rZXldID0gYWN0aW9uLnZhbHVlLCBfZXh0ZW5kczIpKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn07XG5cbnZhciBDb25maWdDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgc3RhdGU6IGluaXRpYWxTdGF0ZSgpXG59KTtcblxudmFyIENvbmZpZ1Byb3ZpZGVyID0gZnVuY3Rpb24gQ29uZmlnUHJvdmlkZXIoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgbWluWWVhciA9IF9yZWYubWluWWVhcixcbiAgICAgIG1heFllYXIgPSBfcmVmLm1heFllYXI7XG5cbiAgdmFyIF91c2VSZWR1Y2VyID0gdXNlUmVkdWNlcihDb25maWdSZWR1Y2VyLCBpbml0aWFsU3RhdGUobWluWWVhciwgbWF4WWVhcikpLFxuICAgICAgc3RhdGUgPSBfdXNlUmVkdWNlclswXSxcbiAgICAgIGRpc3BhdGNoID0gX3VzZVJlZHVjZXJbMV07XG5cbiAgdmFyIGNvbnRleHRWYWx1ZSA9IHtcbiAgICBzdGF0ZTogc3RhdGUsXG4gICAgZGlzcGF0Y2g6IGRpc3BhdGNoXG4gIH07XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbmZpZ0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogY29udGV4dFZhbHVlXG4gIH0sIGNoaWxkcmVuKTtcbn07XG5cbnZhciB1c2VDb25maWcgPSBmdW5jdGlvbiB1c2VDb25maWcoKSB7XG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoQ29uZmlnQ29udGV4dCksXG4gICAgICBzdGF0ZSA9IF91c2VDb250ZXh0LnN0YXRlLFxuICAgICAgZGlzcGF0Y2ggPSBfdXNlQ29udGV4dC5kaXNwYXRjaDtcblxuICBmdW5jdGlvbiBzZXRDb25maWcoa2V5LCB2YWx1ZSkge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIGtleToga2V5LFxuICAgICAgdHlwZTogU0VUX0NPTkZJRyxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29uZmlnKGtleSkge1xuICAgIHJldHVybiBzdGF0ZVtrZXldO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRDb25maWc6IHNldENvbmZpZyxcbiAgICBnZXRDb25maWc6IGdldENvbmZpZ1xuICB9O1xufTtcblxudmFyIENhbGVuZGVyQ29uZmlnID0ge1xuICBtYXhCU1llYXI6IDIxMDAsXG4gIG1pbkJTWWVhcjogMTk3MCxcbiAgb3V0cHV0U2VwYXJhdG9yOiBcIi1cIlxufTtcblxudmFyIG1vbnRocyA9IHtcbiAgZW46IFtcIkJhaXNha2hcIiwgXCJKZXN0aGFcIiwgXCJBc2FyXCIsIFwiU2hyYXdhblwiLCBcIkJoYWRyYVwiLCBcIkFzb2pcIiwgXCJLYXJ0aWtcIiwgXCJNYW5nc2lyXCIsIFwiUG91c2VcIiwgXCJNYWdoXCIsIFwiRmFsZ3VuXCIsIFwiQ2hhaXRyYVwiXSxcbiAgbmU6IFtcIuCkrOCliOCktuCkvuCkllwiLCBcIuCknOClh+CkoFwiLCBcIuCkheCkuOCkvuCksFwiLCBcIuCkuOCkvuCkteCkqFwiLCBcIuCkreCkpuCljFwiLCBcIuCkheCkuOCli+CknFwiLCBcIuCkleCkvuCksOCljeCkpOCkv+CklVwiLCBcIuCkruCkguCkuOCkv+CksFwiLCBcIuCkquCljOCkt1wiLCBcIuCkruCkvuCkmFwiLCBcIuCkq+CkvuCkl+ClgeCkqFwiLCBcIuCkmuCliOCkpFwiXVxufTtcbnZhciB3ZWVrcyA9IHtcbiAgZW46IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcbiAgbmU6IFtcIuCkhuCkiOCkpFwiLCBcIuCkuOCli+CkrlwiLCBcIuCkruCkguCkl+CkslwiLCBcIuCkrOClgeCkp1wiLCBcIuCkrOCkv+CkueClgFwiLCBcIuCktuClgeCkleCljeCksFwiLCBcIuCktuCkqOCkv1wiXVxufTtcbnZhciBtaW5CU1llYXIgPSAxOTcwO1xudmFyIGJzTW9udGhNYXhEYXlzID0gW1szMCwgMzFdLCBbMzEsIDMyXSwgWzMxLCAzMl0sIFszMSwgMzJdLCBbMzEsIDMyXSwgWzMwLCAzMV0sIFsyOSwgMzBdLCBbMjksIDMwXSwgWzI5LCAzMF0sIFsyOSwgMzBdLCBbMjksIDMwXSwgWzMwLCAzMV1dO1xudmFyIGJzTW9udGhDYWxjdWxhdGVkRGF0YSA9IFtbMCwgMSwgMSwgMjIsIDEsIDMsIDEsIDEsIDEsIDMsIDEsIDIyLCAxLCAzLCAxLCAzLCAxLCAyMiwgMSwgMywgMSwgMTksIDEsIDMsIDEsIDEsIDMsIDEsIDIsIDIsIDEsIDMsIDFdLCBbMSwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMywgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMSwgMSwgMSwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMSwgMl0sIFswLCAxLCAyLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAzLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAxLCAxLCAxLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAxLCAyXSwgWzEsIDIsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDIsIDIsIDIsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDIsIDIsIDIsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDIsIDIsIDEsIDMsIDEsIDIsIDIsIDIsIDEsIDJdLCBbNTksIDEsIDI2LCAxLCAyOCwgMSwgMiwgMSwgMTJdLCBbMCwgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgNSwgMSwgMSwgMiwgMiwgMSwgMywgMSwgMiwgMSwgMl0sIFswLCAxMiwgMSwgMywgMSwgMywgMSwgNSwgMSwgMTEsIDEsIDMsIDEsIDMsIDEsIDE4LCAxLCAzLCAxLCAzLCAxLCAxOCwgMSwgMywgMSwgMywgMSwgMjcsIDEsIDJdLCBbMSwgMiwgMiwgMiwgMiwgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMywgMSwgMywgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMiwgMiwgMiwgMTUsIDIsIDRdLCBbMCwgMSwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMywgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMSwgMywgMSwgMywgMSwgMiwgMiwgMiwgMTUsIDIsIDRdLCBbMSwgMSwgMywgMSwgMywgMSwgMTQsIDEsIDMsIDEsIDEsIDEsIDMsIDEsIDE0LCAxLCAzLCAxLCAzLCAxLCAzLCAxLCAxOCwgMSwgMywgMSwgMywgMSwgMywgMSwgMTQsIDEsIDMsIDE1LCAxLCAyLCAxLCAxXSwgWzAsIDEsIDEsIDMsIDEsIDMsIDEsIDEwLCAxLCAzLCAxLCAzLCAxLCAxLCAxLCAzLCAxLCAzLCAxLCAxMCwgMSwgMywgMSwgMywgMSwgMywgMSwgMywgMSwgMTQsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDMsIDEsIDEwLCAxLCAyMCwgMSwgMSwgMV0sIFsxLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAzLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAzLCAxLCAzLCAxLCAyLCAyLCAyLCAyLCAyLCAyLCAyLCAxLCAzLCAxLCAzLCAxLCAyMCwgM11dO1xuXG52YXIgdmFsaWRhdGVBZFllYXIgPSBmdW5jdGlvbiB2YWxpZGF0ZUFkWWVhcih5ZWFyKSB7XG4gIHZhciBtaW5BZFllYXIgPSBDYWxlbmRlckNvbmZpZy5taW5CU1llYXIgLSA1NztcbiAgdmFyIG1heEFkWWVhciA9IENhbGVuZGVyQ29uZmlnLm1heEJTWWVhciAtIDU3O1xuXG4gIGlmICh5ZWFyIDwgbWluQWRZZWFyIHx8IHllYXIgPiBtYXhBZFllYXIpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkFEIHllYXIgc2hvdWxkIGJlIGluIHJhbmdlIG9mIFwiICsgbWluQWRZZWFyICsgXCIgdG8gXCIgKyBtYXhBZFllYXIpO1xuICB9XG59O1xudmFyIHZhbGlkYXRlQWRNb250aCA9IGZ1bmN0aW9uIHZhbGlkYXRlQWRNb250aChtb250aCkge1xuICBpZiAobW9udGggPCAxIHx8IG1vbnRoID4gMTIpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkFEIG1vbnRoIHNob3VsZCBiZSBpbiByYW5nZSBvZiAxIHRvIDEyXCIpO1xuICB9XG59O1xudmFyIHZhbGlkYXRlQWREYXkgPSBmdW5jdGlvbiB2YWxpZGF0ZUFkRGF5KGRheSkge1xuICBpZiAoZGF5IDwgMSB8fCBkYXkgPiAzMSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQUQgZGF5IHNob3VsZCBiZSBpbiByYW5nZSBvZiAxIHRvIDMxXCIpO1xuICB9XG59O1xudmFyIHZhbGlkYXRlQnNZZWFyID0gZnVuY3Rpb24gdmFsaWRhdGVCc1llYXIoeWVhcikge1xuICB2YXIgbWlkQnNZZWFyID0gQ2FsZW5kZXJDb25maWcubWluQlNZZWFyO1xuICB2YXIgbWF4QnNZZWFyID0gQ2FsZW5kZXJDb25maWcubWF4QlNZZWFyO1xuXG4gIGlmICh5ZWFyIDwgbWlkQnNZZWFyIHx8IHllYXIgPiBtYXhCc1llYXIpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJTIHllYXIgc2hvdWxkIGJlIGluIHJhbmdlIG9mIFwiICsgbWlkQnNZZWFyICsgXCIgdG8gXCIgKyBtYXhCc1llYXIpO1xuICB9XG59O1xudmFyIHZhbGlkYXRlQnNNb250aCA9IGZ1bmN0aW9uIHZhbGlkYXRlQnNNb250aChtb250aCkge1xuICBpZiAobW9udGggPCAxIHx8IG1vbnRoID4gMTIpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJTIG1vbnRoIHNob3VsZCBiZSBpbiByYW5nZSBvZiAxIHRvIDEyXCIpO1xuICB9XG59O1xudmFyIHZhbGlkYXRlQnNEYXkgPSBmdW5jdGlvbiB2YWxpZGF0ZUJzRGF5KGRheSkge1xuICBpZiAoZGF5IDwgMSB8fCBkYXkgPiAzMikge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQlMgZGF5IHNob3VsZCBiZSBpbiByYW5nZSBvZiAxIHRvIDMyXCIpO1xuICB9XG59O1xuXG52YXIgcmFuZ2UgPSBmdW5jdGlvbiByYW5nZShzdGFydCwgZW5kLCBzdGVwKSB7XG4gIGlmIChzdGVwID09PSB2b2lkIDApIHtcbiAgICBzdGVwID0gMTtcbiAgfVxuXG4gIHZhciBsaXN0ID0gW107XG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSA9IGkgKyBzdGVwKSB7XG4gICAgbGlzdC5wdXNoKGkpO1xuICB9XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xudmFyIHplcm9QYWQgPSBmdW5jdGlvbiB6ZXJvUGFkKG51bSkge1xuICByZXR1cm4gXCJcIiArIChudW0gPiA5ID8gbnVtIDogXCIwXCIgKyBudW0pO1xufTtcbnZhciBleGVjdXRpb25EZWxlZ2F0aW9uID0gZnVuY3Rpb24gZXhlY3V0aW9uRGVsZWdhdGlvbihleGVjdXRpb24sIGRlbGVnYXRlZEV4ZWN1dGlvbikge1xuICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIGV4ZWN1dGlvbigpO1xuICAgIHJlc29sdmUoKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgZGVsZWdhdGVkRXhlY3V0aW9uKCk7XG4gIH0pO1xufTtcbnZhciBzcGxpdERhdGUgPSBmdW5jdGlvbiBzcGxpdERhdGUoZGF0ZSwgc2VwYXJhdG9yKSB7XG4gIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCkge1xuICAgIHNlcGFyYXRvciA9IFwiLVwiO1xuICB9XG5cbiAgdmFyIF9kYXRlJHNwbGl0ID0gZGF0ZS5zcGxpdChzZXBhcmF0b3IpLFxuICAgICAgeWVhciA9IF9kYXRlJHNwbGl0WzBdLFxuICAgICAgbW9udGggPSBfZGF0ZSRzcGxpdFsxXSxcbiAgICAgIGRheSA9IF9kYXRlJHNwbGl0WzJdO1xuXG4gIHJldHVybiB7XG4gICAgZGF5OiBwYXJzZUludChkYXksIDEwKSxcbiAgICBtb250aDogcGFyc2VJbnQobW9udGgsIDEwKSxcbiAgICB5ZWFyOiBwYXJzZUludCh5ZWFyLCAxMClcbiAgfTtcbn07XG52YXIgc3RpdGNoRGF0ZSA9IGZ1bmN0aW9uIHN0aXRjaERhdGUoZGF0ZSwgc2VwYXJhdG9yKSB7XG4gIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCkge1xuICAgIHNlcGFyYXRvciA9IFwiLVwiO1xuICB9XG5cbiAgcmV0dXJuIFwiXCIgKyBkYXRlLnllYXIgKyBzZXBhcmF0b3IgKyB6ZXJvUGFkKGRhdGUubW9udGgpICsgc2VwYXJhdG9yICsgemVyb1BhZChkYXRlLmRheSk7XG59O1xudmFyIHZhbGlkYXRlRGF0ZU9iamVjdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRGF0ZU9iamVjdChkYXRlLCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSB2b2lkIDApIHtcbiAgICB0eXBlID0gQlM7XG4gIH1cblxuICB2YXIgeWVhciA9IGRhdGUueWVhcixcbiAgICAgIG1vbnRoID0gZGF0ZS5tb250aCxcbiAgICAgIGRheSA9IGRhdGUuZGF5O1xuXG4gIGlmICh0eXBlID09PSBCUykge1xuICAgIHZhbGlkYXRlQnNZZWFyKHllYXIpO1xuICAgIHZhbGlkYXRlQnNNb250aChtb250aCk7XG4gICAgdmFsaWRhdGVCc0RheShkYXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhbGlkYXRlQWRZZWFyKHllYXIpO1xuICB2YWxpZGF0ZUFkTW9udGgobW9udGgpO1xuICB2YWxpZGF0ZUFkRGF5KGRheSk7XG59O1xudmFyIGdldE51bWJlck9mRGF5c0luQlNNb250aCA9IGZ1bmN0aW9uIGdldE51bWJlck9mRGF5c0luQlNNb250aCh5ZWFyTW9udGgpIHtcbiAgdmFyIHllYXIgPSB5ZWFyTW9udGgueWVhcixcbiAgICAgIG1vbnRoID0geWVhck1vbnRoLm1vbnRoO1xuICB2YWxpZGF0ZUJzWWVhcih5ZWFyKTtcbiAgdmFsaWRhdGVCc01vbnRoKG1vbnRoKTtcbiAgdmFyIHllYXJDb3VudCA9IDA7XG4gIHZhciB0b3RhbFllYXJzID0geWVhciArIDEgLSBtaW5CU1llYXI7XG4gIHZhciBic01vbnRoRGF0YSA9IGJzTW9udGhDYWxjdWxhdGVkRGF0YVttb250aCAtIDFdO1xuICByZXR1cm4gYnNNb250aERhdGEucmVkdWNlKGZ1bmN0aW9uIChudW1iZXJPZkRheXMsIG1vbnRoRGF0YSwgaW5kZXgpIHtcbiAgICBpZiAobW9udGhEYXRhID09PSAwIHx8IG51bWJlck9mRGF5cyAhPT0gMCkge1xuICAgICAgcmV0dXJuIG51bWJlck9mRGF5cztcbiAgICB9XG5cbiAgICB2YXIgYnNNb250aFVwcGVyRGF5c0luZGV4ID0gaW5kZXggJSAyO1xuICAgIHllYXJDb3VudCArPSBtb250aERhdGE7XG5cbiAgICBpZiAodG90YWxZZWFycyA+IHllYXJDb3VudCkge1xuICAgICAgcmV0dXJuIG51bWJlck9mRGF5cztcbiAgICB9XG5cbiAgICBpZiAoeWVhciA9PT0gMjA4MSAmJiBtb250aCA9PT0gMikge1xuICAgICAgcmV0dXJuIGJzTW9udGhNYXhEYXlzW21vbnRoIC0gMV1bYnNNb250aFVwcGVyRGF5c0luZGV4ICsgMV07XG4gICAgfVxuXG4gICAgaWYgKHllYXIgPT09IDIwODEgJiYgbW9udGggPT09IDMpIHtcbiAgICAgIHJldHVybiBic01vbnRoTWF4RGF5c1ttb250aCAtIDFdW2JzTW9udGhVcHBlckRheXNJbmRleCAtIDFdO1xuICAgIH1cblxuICAgIGlmICh5ZWFyID09PSAyMDgxICYmIG1vbnRoID09PSAxMSkge1xuICAgICAgcmV0dXJuIGJzTW9udGhNYXhEYXlzW21vbnRoIC0gMV1bYnNNb250aFVwcGVyRGF5c0luZGV4XSAtIDE7XG4gICAgfVxuXG4gICAgaWYgKHllYXIgPT09IDIwODEgJiYgbW9udGggPT09IDEyKSB7XG4gICAgICByZXR1cm4gYnNNb250aE1heERheXNbbW9udGggLSAxXVtic01vbnRoVXBwZXJEYXlzSW5kZXhdICsgMTtcbiAgICB9XG5cbiAgICBpZiAoeWVhciA9PT0gMjA4NSAmJiBtb250aCA9PT0gNSB8fCB5ZWFyID09PSAyMDg4ICYmIG1vbnRoID09PSA1KSB7XG4gICAgICByZXR1cm4gYnNNb250aE1heERheXNbbW9udGggLSAxXVtic01vbnRoVXBwZXJEYXlzSW5kZXhdIC0gMjtcbiAgICB9XG5cbiAgICByZXR1cm4gYnNNb250aE1heERheXNbbW9udGggLSAxXVtic01vbnRoVXBwZXJEYXlzSW5kZXhdO1xuICB9LCAwKTtcbn07XG52YXIgcGFyc2VCU0RhdGUgPSBmdW5jdGlvbiBwYXJzZUJTRGF0ZShkYXRlLCBzZXBhcmF0b3IpIHtcbiAgaWYgKHNlcGFyYXRvciA9PT0gdm9pZCAwKSB7XG4gICAgc2VwYXJhdG9yID0gXCItXCI7XG4gIH1cblxuICB2YXIgX3NwbGl0RGF0ZSA9IHNwbGl0RGF0ZShkYXRlLCBzZXBhcmF0b3IpLFxuICAgICAgeWVhciA9IF9zcGxpdERhdGUueWVhcixcbiAgICAgIG1vbnRoID0gX3NwbGl0RGF0ZS5tb250aCxcbiAgICAgIGRheSA9IF9zcGxpdERhdGUuZGF5O1xuXG4gIHZhbGlkYXRlRGF0ZU9iamVjdCh7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBkYXlcbiAgfSk7XG4gIHZhciBhZERhdGUgPSBuZXcgRGF0ZShCU1RvQUQoZGF0ZSkpO1xuICB2YXIgZmlyc3RBZERhdGVJbkJTTW9udGggPSBuZXcgRGF0ZShCU1RvQUQoc3RpdGNoRGF0ZSh7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiAxXG4gIH0sIHNlcGFyYXRvcikpKTtcbiAgdmFyIG51bWJlck9mRGF5c0luTW9udGggPSBnZXROdW1iZXJPZkRheXNJbkJTTW9udGgoe1xuICAgIHllYXI6IHllYXIsXG4gICAgbW9udGg6IG1vbnRoXG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGFkRGF0ZTogYWREYXRlLFxuICAgIGJzRGF5OiBkYXksXG4gICAgYnNNb250aDogbW9udGgsXG4gICAgYnNZZWFyOiB5ZWFyLFxuICAgIGZpcnN0QWREYXlJbkJTTW9udGg6IGZpcnN0QWREYXRlSW5CU01vbnRoLFxuICAgIG51bWJlck9mRGF5c0luQlNNb250aDogbnVtYmVyT2ZEYXlzSW5Nb250aCxcbiAgICB3ZWVrRGF5OiBhZERhdGUuZ2V0RGF5KClcbiAgfTtcbn07XG52YXIgY2hpbGRPZiA9IGZ1bmN0aW9uIGNoaWxkT2YoY2hpbGROb2RlLCBwYXJlbnROb2RlKSB7XG4gIHJldHVybiBwYXJlbnROb2RlLmNvbnRhaW5zKGNoaWxkTm9kZSk7XG59O1xuXG52YXIgSWNvbkJhc2UgPSBmdW5jdGlvbiBJY29uQmFzZShwcm9wcykge1xuICB2YXIgb3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHByb3BzLCBbXCJzaXplXCIsIFwidmlld0JveFNpemVcIl0pO1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgIHhtbG5zOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxuICAgIHhtbG5zWGxpbms6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyxcbiAgICB3aWR0aDogcHJvcHMuc2l6ZSxcbiAgICBoZWlnaHQ6IHByb3BzLnNpemVcbiAgfSwgb3B0aW9ucywge1xuICAgIHZpZXdCb3g6IFwiMCAwIFwiICsgcHJvcHMudmlld0JveFNpemUgKyBcIiBcIiArIHByb3BzLnZpZXdCb3hTaXplXG4gIH0pLCBwcm9wcy5jaGlsZHJlbik7XG59O1xuXG5JY29uQmFzZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGNvbG9yOiBcIiM2YjZiNmJcIixcbiAgc2l6ZTogXCIxNlwiLFxuICB2aWV3Qm94U2l6ZTogXCIyNFwiXG59O1xuXG52YXIgTmV4dCA9IGZ1bmN0aW9uIE5leHQocHJvcHMpIHtcbiAgdmFyIHJvdGF0aW9uT3JpZ2luID0gcGFyc2VJbnQocHJvcHMuc2l6ZSB8fCBcIjI0XCIsIDEwKSAvIDI7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CYXNlLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcyksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICB0cmFuc2Zvcm06IFwicm90YXRlKDE4MCBcIiArIHJvdGF0aW9uT3JpZ2luICsgXCIgXCIgKyByb3RhdGlvbk9yaWdpbiArIFwiKVwiLFxuICAgIGZpbGw6ICdub25lJyxcbiAgICBmaWxsUnVsZTogJ2V2ZW5vZGQnLFxuICAgIHN0cm9rZTogJ2N1cnJlbnRjb2xvcicsXG4gICAgc3Ryb2tlTGluZWNhcDogJ3JvdW5kJyxcbiAgICBzdHJva2VMaW5lam9pbjogJ3JvdW5kJyxcbiAgICBzdHJva2VXaWR0aDogJzIuNCcsXG4gICAgZDogJ00xNi4yODMgMTguOTA3TDkuNiAxMmw2LjY4My01LjQzOCdcbiAgfSkpO1xufTtcblxudmFyIFByZXZpb3VzID0gZnVuY3Rpb24gUHJldmlvdXMocHJvcHMpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbkJhc2UsIE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6ICdub25lJyxcbiAgICBmaWxsUnVsZTogJ2V2ZW5vZGQnLFxuICAgIHN0cm9rZTogJ2N1cnJlbnRjb2xvcicsXG4gICAgc3Ryb2tlTGluZWNhcDogJ3JvdW5kJyxcbiAgICBzdHJva2VMaW5lam9pbjogJ3JvdW5kJyxcbiAgICBzdHJva2VXaWR0aDogJzIuNCcsXG4gICAgZDogJ00xNi4yODMgMTguOTA3TDkuNiAxMmw2LjY4My01LjQzOCdcbiAgfSkpO1xufTtcblxudmFyIFRvZGF5ID0gZnVuY3Rpb24gVG9kYXkocHJvcHMpIHtcbiAgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICB2aWV3Qm94U2l6ZTogXCI1MTJcIixcbiAgICBzaXplOiBcIjE1XCJcbiAgfSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CYXNlLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcyksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkZWZzXCIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBpZDogJ2EnLFxuICAgIGQ6ICdNNDY4IDE2MEg0NGMtNi42IDAtMTItNS40LTEyLTEydi0zNmMwLTI2LjUgMjEuNS00OCA0OC00OGg0OFYxMmMwLTYuNiA1LjQtMTIgMTItMTJoNDBjNi42IDAgMTIgNS40IDEyIDEydjUyaDEyOFYxMmMwLTYuNiA1LjQtMTIgMTItMTJoNDBjNi42IDAgMTIgNS40IDEyIDEydjUyaDQ4YzI2LjUgMCA0OCAyMS41IDQ4IDQ4djM2YzAgNi42LTUuNCAxMi0xMiAxMnpNNDQgMTkyaDQyNGM2LjYgMCAxMiA1LjQgMTIgMTJ2MjYwYzAgMjYuNS0yMS41IDQ4LTQ4IDQ4SDgwYy0yNi41IDAtNDgtMjEuNS00OC00OFYyMDRjMC02LjYgNS40LTEyIDEyLTEyem0xMTYgMjA0YzAtNi42LTUuNC0xMi0xMi0xMmgtNDBjLTYuNiAwLTEyIDUuNC0xMiAxMnY0MGMwIDYuNiA1LjQgMTIgMTIgMTJoNDBjNi42IDAgMTItNS40IDEyLTEydi00MHptMC0xMjhjMC02LjYtNS40LTEyLTEyLTEyaC00MGMtNi42IDAtMTIgNS40LTEyIDEydjQwYzAgNi42IDUuNCAxMiAxMiAxMmg0MGM2LjYgMCAxMi01LjQgMTItMTJ2LTQwem0xMjggMTI4YzAtNi42LTUuNC0xMi0xMi0xMmgtNDBjLTYuNiAwLTEyIDUuNC0xMiAxMnY0MGMwIDYuNiA1LjQgMTIgMTIgMTJoNDBjNi42IDAgMTItNS40IDEyLTEydi00MHptMC0xMjhjMC02LjYtNS40LTEyLTEyLTEyaC00MGMtNi42IDAtMTIgNS40LTEyIDEydjQwYzAgNi42IDUuNCAxMiAxMiAxMmg0MGM2LjYgMCAxMi01LjQgMTItMTJ2LTQwem0xMjggMTI4YzAtNi42LTUuNC0xMi0xMi0xMmgtNDBjLTYuNiAwLTEyIDUuNC0xMiAxMnY0MGMwIDYuNiA1LjQgMTIgMTIgMTJoNDBjNi42IDAgMTItNS40IDEyLTEydi00MHptMC0xMjhjMC02LjYtNS40LTEyLTEyLTEyaC00MGMtNi42IDAtMTIgNS40LTEyIDEydjQwYzAgNi42IDUuNCAxMiAxMiAxMmg0MGM2LjYgMCAxMi01LjQgMTItMTJ2LTQweidcbiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgZmlsbDogJ25vbmUnLFxuICAgIGZpbGxSdWxlOiAnZXZlbm9kZCdcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcIm1hc2tcIiwge1xuICAgIGlkOiAnYicsXG4gICAgZmlsbDogJyNmZmYnXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ1c2VcIiwge1xuICAgIHhsaW5rSHJlZjogJyNhJ1xuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ1c2VcIiwge1xuICAgIGZpbGw6ICcjMDAwJyxcbiAgICBmaWxsUnVsZTogJ25vbnplcm8nLFxuICAgIHhsaW5rSHJlZjogJyNhJ1xuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGZpbGw6ICdjdXJyZW50Y29sb3InLFxuICAgIG1hc2s6ICd1cmwoI2IpJ1xuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogJ00wIDBoNTEydjUxMkgweidcbiAgfSkpKSk7XG59O1xuXG52YXIgdHJhbnNsYXRpb25zID0ge1xuICBwcmV2aW91czoge1xuICAgIGVuOiBcIlByZXZpb3VzXCIsXG4gICAgbmU6IFwi4KSF4KSY4KS/4KSy4KWN4KSy4KWLXCJcbiAgfSxcbiAgbmV4dDoge1xuICAgIGVuOiBcIk5leHRcIixcbiAgICBuZTogXCLgpIXgpLDgpY3gpJXgpYtcIlxuICB9LFxuICB0b2RheToge1xuICAgIGVuOiBcIlRvZGF5XCIsXG4gICAgbmU6IFwi4KSG4KScXCJcbiAgfVxufTtcblxudmFyIHVzZVRyYW5zID0gZnVuY3Rpb24gdXNlVHJhbnMoY3VycmVudExvY2FsZSkge1xuICByZXR1cm4ge1xuICAgIHRyYW5zOiBmdW5jdGlvbiB0cmFucyhrZXksIGxvY2FsZSkge1xuICAgICAgaWYgKCF0cmFuc2xhdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJhbnNsYXRpb25zW2tleV1bbG9jYWxlIHx8IGN1cnJlbnRMb2NhbGVdO1xuICAgIH0sXG4gICAgbnVtYmVyVHJhbnM6IGZ1bmN0aW9uIG51bWJlclRyYW5zKG51bSwgbG9jYWxlKSB7XG4gICAgICByZXR1cm4gXCJcIiArIChsb2NhbGUgfHwgY3VycmVudExvY2FsZSkgPT09IEVOR0xJU0ggPyBuZXBhbGlUb0VuZ2xpc2hOdW1iZXIobnVtKSA6IGVuZ2xpc2hUb05lcGFsaU51bWJlcihudW0pO1xuICAgIH1cbiAgfTtcbn07XG5cbnZhciBEcm9wRG93biA9IGZ1bmN0aW9uIERyb3BEb3duKF9yZWYpIHtcbiAgdmFyIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICB2YWx1ZSA9IF9yZWYudmFsdWUsXG4gICAgICBvblNlbGVjdCA9IF9yZWYub25TZWxlY3Q7XG4gIHVzZUxheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7fSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6ICdkcm9wLWRvd24nXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogJ29wdGlvbi13cmFwcGVyJ1xuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwgbnVsbCwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICAgIGtleTogaW5kZXgsXG4gICAgICBjbGFzc05hbWU6IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUgPyBcImFjdGl2ZVwiIDogXCJcIixcbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgIG9uU2VsZWN0KG9wdGlvbik7XG4gICAgICB9XG4gICAgfSwgb3B0aW9uLmxhYmVsKTtcbiAgfSkpKSk7XG59O1xuXG52YXIgTW9udGhQaWNrZXIgPSBmdW5jdGlvbiBNb250aFBpY2tlcihfcmVmKSB7XG4gIHZhciBkYXRlID0gX3JlZi5kYXRlLFxuICAgICAgb25TZWxlY3QgPSBfcmVmLm9uU2VsZWN0O1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBzaG93RHJvcGRvd24gPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXRTaG93RHJvcGRvd24gPSBfdXNlU3RhdGVbMV07XG5cbiAgdmFyIF91c2VDb25maWcgPSB1c2VDb25maWcoKSxcbiAgICAgIGdldENvbmZpZyA9IF91c2VDb25maWcuZ2V0Q29uZmlnO1xuXG4gIHZhciBjdXJyZW50TG9jYWxlID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldENvbmZpZyhcImN1cnJlbnRMb2NhbGVcIik7XG4gIH0sIFtnZXRDb25maWddKTtcbiAgdmFyIGN1cnJlbnRNb250aCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBtb250aCA9IGRhdGUuYnNNb250aDtcbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IG1vbnRoc1tjdXJyZW50TG9jYWxlXVttb250aCAtIDFdLFxuICAgICAgdmFsdWU6IG1vbnRoXG4gICAgfTtcbiAgfSwgW2RhdGUsIGN1cnJlbnRMb2NhbGVdKTtcbiAgdmFyIG1vbnRoTGlzdCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtb250aHNbY3VycmVudExvY2FsZV0ubWFwKGZ1bmN0aW9uIChtb250aCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBtb250aCxcbiAgICAgICAgdmFsdWU6IGluZGV4ICsgMVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSwgW2N1cnJlbnRMb2NhbGVdKTtcblxuICB2YXIgaGFuZGxlRHJvcGRvd25WaWV3ID0gZnVuY3Rpb24gaGFuZGxlRHJvcGRvd25WaWV3KHNlbGVjdGVkKSB7XG4gICAgc2V0U2hvd0Ryb3Bkb3duKCFzaG93RHJvcGRvd24pO1xuICAgIG9uU2VsZWN0KHNlbGVjdGVkLnZhbHVlKTtcbiAgfTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiAnY29udHJvbCBtb250aCdcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogJ2N1cnJlbnQtbW9udGgnLFxuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gc2V0U2hvd0Ryb3Bkb3duKCFzaG93RHJvcGRvd24pO1xuICAgIH1cbiAgfSwgY3VycmVudE1vbnRoLmxhYmVsKSwgc2hvd0Ryb3Bkb3duICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcERvd24sIHtcbiAgICBvcHRpb25zOiBtb250aExpc3QsXG4gICAgdmFsdWU6IGN1cnJlbnRNb250aC52YWx1ZSxcbiAgICBvblNlbGVjdDogaGFuZGxlRHJvcGRvd25WaWV3XG4gIH0pKTtcbn07XG5cbnZhciBZZWFyUGlja2VyID0gZnVuY3Rpb24gWWVhclBpY2tlcihfcmVmKSB7XG4gIHZhciBkYXRlID0gX3JlZi5kYXRlLFxuICAgICAgb25TZWxlY3QgPSBfcmVmLm9uU2VsZWN0O1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBzaG93RHJvcGRvd24gPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXRTaG93RHJvcGRvd24gPSBfdXNlU3RhdGVbMV07XG5cbiAgdmFyIF91c2VDb25maWcgPSB1c2VDb25maWcoKSxcbiAgICAgIGdldENvbmZpZyA9IF91c2VDb25maWcuZ2V0Q29uZmlnO1xuXG4gIHZhciBfdXNlVHJhbnMgPSB1c2VUcmFucyhnZXRDb25maWcoXCJjdXJyZW50TG9jYWxlXCIpKSxcbiAgICAgIG51bWJlclRyYW5zID0gX3VzZVRyYW5zLm51bWJlclRyYW5zO1xuXG4gIHZhciBjdXJyZW50WWVhciA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciB5ZWFyID0gZGF0ZS5ic1llYXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiBudW1iZXJUcmFucyh5ZWFyKSxcbiAgICAgIHZhbHVlOiB5ZWFyXG4gICAgfTtcbiAgfSwgW2RhdGVdKTtcbiAgdmFyIHllYXJzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJhbmdlKGdldENvbmZpZyhcIm1pblllYXJcIiksIGdldENvbmZpZyhcIm1heFllYXJcIikpLnJldmVyc2UoKS5tYXAoZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBudW1iZXJUcmFucyh5ZWFyKSxcbiAgICAgICAgdmFsdWU6IHllYXJcbiAgICAgIH07XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICB2YXIgaGFuZGxlRHJvcGRvd25WaWV3ID0gZnVuY3Rpb24gaGFuZGxlRHJvcGRvd25WaWV3KHNlbGVjdGVkKSB7XG4gICAgc2V0U2hvd0Ryb3Bkb3duKCFzaG93RHJvcGRvd24pO1xuICAgIG9uU2VsZWN0KHNlbGVjdGVkLnZhbHVlKTtcbiAgfTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiAnY29udHJvbCB5ZWFyJ1xuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiAnY3VycmVudC15ZWFyJyxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHNldFNob3dEcm9wZG93bighc2hvd0Ryb3Bkb3duKTtcbiAgICB9XG4gIH0sIGN1cnJlbnRZZWFyLmxhYmVsKSwgc2hvd0Ryb3Bkb3duICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcERvd24sIHtcbiAgICBvcHRpb25zOiB5ZWFycyxcbiAgICB2YWx1ZTogY3VycmVudFllYXIudmFsdWUsXG4gICAgb25TZWxlY3Q6IGhhbmRsZURyb3Bkb3duVmlld1xuICB9KSk7XG59O1xuXG52YXIgQ2FsZW5kZXJDb250cm9sbGVyID0gZnVuY3Rpb24gQ2FsZW5kZXJDb250cm9sbGVyKHByb3BzKSB7XG4gIHZhciBvbk5leHRNb250aCA9IHByb3BzLm9uTmV4dE1vbnRoLFxuICAgICAgb25QcmV2aW91c01vbnRoID0gcHJvcHMub25QcmV2aW91c01vbnRoLFxuICAgICAgY2FsZW5kZXJEYXRlID0gcHJvcHMuY2FsZW5kZXJEYXRlLFxuICAgICAgb25Ub2RheSA9IHByb3BzLm9uVG9kYXksXG4gICAgICBvblllYXJTZWxlY3QgPSBwcm9wcy5vblllYXJTZWxlY3QsXG4gICAgICBvbk1vbnRoU2VsZWN0ID0gcHJvcHMub25Nb250aFNlbGVjdDtcblxuICB2YXIgX3VzZUNvbmZpZyA9IHVzZUNvbmZpZygpLFxuICAgICAgZ2V0Q29uZmlnID0gX3VzZUNvbmZpZy5nZXRDb25maWc7XG5cbiAgdmFyIF91c2VUcmFucyA9IHVzZVRyYW5zKGdldENvbmZpZyhcImN1cnJlbnRMb2NhbGVcIikpLFxuICAgICAgdHJhbnMgPSBfdXNlVHJhbnMudHJhbnM7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogJ2NhbGVuZGFyLWNvbnRyb2xsZXInXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6ICdjb250cm9sIGljb24nLFxuICAgIHRpdGxlOiB0cmFucyhcInByZXZpb3VzXCIpLFxuICAgIG9uQ2xpY2s6IG9uUHJldmlvdXNNb250aFxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFByZXZpb3VzLCBudWxsKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogJ2RhdGUtaW5kaWNhdG9yJ1xuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KE1vbnRoUGlja2VyLCB7XG4gICAgZGF0ZTogY2FsZW5kZXJEYXRlLFxuICAgIG9uU2VsZWN0OiBvbk1vbnRoU2VsZWN0XG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFllYXJQaWNrZXIsIHtcbiAgICBkYXRlOiBjYWxlbmRlckRhdGUsXG4gICAgb25TZWxlY3Q6IG9uWWVhclNlbGVjdFxuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6ICdjb250cm9sIGljb24gaWNvbi10b2RheScsXG4gICAgdGl0bGU6IHRyYW5zKFwidG9kYXlcIiksXG4gICAgb25DbGljazogb25Ub2RheVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFRvZGF5LCB7XG4gICAgY29sb3I6ICcjMjA5NmY1J1xuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6ICdjb250cm9sIGljb24nLFxuICAgIHRpdGxlOiB0cmFucyhcIm5leHRcIiksXG4gICAgb25DbGljazogb25OZXh0TW9udGhcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChOZXh0LCBudWxsKSkpO1xufTtcblxudmFyIERheVBpY2tlckJvZHkgPSBmdW5jdGlvbiBEYXlQaWNrZXJCb2R5KF9yZWYpIHtcbiAgdmFyIHNlbGVjdGVkRGF0ZSA9IF9yZWYuc2VsZWN0ZWREYXRlLFxuICAgICAgZGF0ZSA9IF9yZWYuY2FsZW5kZXJEYXRlLFxuICAgICAgb25TZWxlY3QgPSBfcmVmLm9uU2VsZWN0O1xuICB2YXIgd2Vla3NJbk1vbnRoID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbCgoZGF0ZS5maXJzdEFkRGF5SW5CU01vbnRoLmdldERheSgpICsgZGF0ZS5udW1iZXJPZkRheXNJbkJTTW9udGgpIC8gNykgLSAxO1xuICB9LCBbZGF0ZV0pO1xuICB2YXIgcHJldmlvdXNNb250aCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkYXRlLmJzTW9udGggLSAxICE9PSAwID8gZGF0ZS5ic01vbnRoIC0gMSA6IDEyO1xuICB9LCBbZGF0ZV0pO1xuICB2YXIgcHJldmlvdXNZZWFyID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByZXZpb3VzTW9udGggPT09IDEyID8gZGF0ZS5ic1llYXIgLSAxIDogZGF0ZS5ic1llYXI7XG4gIH0sIFtwcmV2aW91c01vbnRoLCBkYXRlXSk7XG4gIHZhciBwcmV2aW91c01vbnRoRGF5cyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcmV2aW91c1llYXIgPj0gbWluQlNZZWFyID8gZ2V0TnVtYmVyT2ZEYXlzSW5CU01vbnRoKHtcbiAgICAgIG1vbnRoOiBwcmV2aW91c01vbnRoLFxuICAgICAgeWVhcjogcHJldmlvdXNZZWFyXG4gICAgfSkgOiAzMDtcbiAgfSwgW3ByZXZpb3VzWWVhcl0pO1xuXG4gIHZhciBfdXNlQ29uZmlnID0gdXNlQ29uZmlnKCksXG4gICAgICBnZXRDb25maWcgPSBfdXNlQ29uZmlnLmdldENvbmZpZztcblxuICB2YXIgX3VzZVRyYW5zID0gdXNlVHJhbnMoZ2V0Q29uZmlnKFwiY3VycmVudExvY2FsZVwiKSksXG4gICAgICBudW1iZXJUcmFucyA9IF91c2VUcmFucy5udW1iZXJUcmFucztcblxuICB2YXIgZ2V0RGF5SW5mbyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICh3ZWVrTnVtLCB3ZWVrRGF5TnVtKSB7XG4gICAgdmFyIGRheSA9IHdlZWtOdW0gKiA3ICsgd2Vla0RheU51bSAtIGRhdGUuZmlyc3RBZERheUluQlNNb250aC5nZXREYXkoKTtcbiAgICB2YXIgbW9udGggPSBkYXRlLmJzTW9udGg7XG4gICAgdmFyIHllYXIgPSBkYXRlLmJzWWVhcjtcbiAgICB2YXIgaXNDdXJyZW50TW9udGggPSB0cnVlO1xuXG4gICAgaWYgKGRheSA8PSAwKSB7XG4gICAgICBkYXkgPSBwcmV2aW91c01vbnRoRGF5cyArIGRheTtcbiAgICAgIGlzQ3VycmVudE1vbnRoID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXkgPiBkYXRlLm51bWJlck9mRGF5c0luQlNNb250aCkge1xuICAgICAgZGF5ID0gZGF5IC0gZGF0ZS5udW1iZXJPZkRheXNJbkJTTW9udGg7XG4gICAgICBpc0N1cnJlbnRNb250aCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB0b2RheSA9IHNwbGl0RGF0ZShBRFRvQlMobmV3IERhdGUoKSkpO1xuICAgIHZhciBpc1RvZGF5ID0gaXNDdXJyZW50TW9udGggPyB0b2RheS5kYXkgPT09IGRheSAmJiB0b2RheS5tb250aCA9PT0gZGF0ZS5ic01vbnRoICYmIHRvZGF5LnllYXIgPT09IGRhdGUuYnNZZWFyIDogZmFsc2U7XG4gICAgdmFyIGlzU2VsZWN0ZWQgPSBpc0N1cnJlbnRNb250aCA/IHNlbGVjdGVkRGF0ZS5ic0RheSA9PT0gZGF5ICYmIHNlbGVjdGVkRGF0ZS5ic01vbnRoID09PSBkYXRlLmJzTW9udGggJiYgc2VsZWN0ZWREYXRlLmJzWWVhciA9PT0gZGF0ZS5ic1llYXIgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgZGF5OiBkYXksXG4gICAgICBtb250aDogbW9udGgsXG4gICAgICB5ZWFyOiB5ZWFyLFxuICAgICAgaXNDdXJyZW50TW9udGg6IGlzQ3VycmVudE1vbnRoLFxuICAgICAgaXNUb2RheTogaXNUb2RheSxcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWRcbiAgICB9O1xuICB9LCBbZGF0ZSwgc2VsZWN0ZWREYXRlLCBwcmV2aW91c01vbnRoRGF5c10pO1xuICB2YXIgb25EYXRlU2VsZWN0SGFuZGxlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChkYXlJbmZvKSB7XG4gICAgaWYgKGRheUluZm8uaXNDdXJyZW50TW9udGgpIHtcbiAgICAgIG9uU2VsZWN0KHtcbiAgICAgICAgeWVhcjogZGF5SW5mby55ZWFyLFxuICAgICAgICBtb250aDogZGF5SW5mby5tb250aCxcbiAgICAgICAgZGF5OiBkYXlJbmZvLmRheVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbb25TZWxlY3RdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiLCBudWxsLCByYW5nZSgwLCB3ZWVrc0luTW9udGgpLm1hcChmdW5jdGlvbiAod2Vla051bSkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAga2V5OiB3ZWVrTnVtXG4gICAgfSwgcmFuZ2UoMSwgNykubWFwKGZ1bmN0aW9uICh3ZWVrRGF5TnVtKSB7XG4gICAgICB2YXIgZGF5SW5mbyA9IGdldERheUluZm8od2Vla051bSwgd2Vla0RheU51bSk7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInRkXCIsIHtcbiAgICAgICAga2V5OiB3ZWVrRGF5TnVtLFxuICAgICAgICBjbGFzc05hbWU6IFwibW9udGgtZGF5IFwiICsgKGRheUluZm8uaXNDdXJyZW50TW9udGggPyBcImN1cnJlbnRcIiA6IFwiZGlzYWJsZWRcIikgKyBcIiBcIiArIChkYXlJbmZvLmlzVG9kYXkgPyBcInRvZGF5XCIgOiBcIlwiKSArIFwiIFwiICsgKGRheUluZm8uaXNTZWxlY3RlZCA/IFwic2VsZWN0ZWRcIiA6IFwiXCIpLFxuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgIHJldHVybiBvbkRhdGVTZWxlY3RIYW5kbGVyKGRheUluZm8pO1xuICAgICAgICB9XG4gICAgICB9LCBudW1iZXJUcmFucyhkYXlJbmZvLmRheSkpO1xuICAgIH0pKTtcbiAgfSkpO1xufTtcblxudmFyIERheVBpY2tlckhlYWRlciA9IGZ1bmN0aW9uIERheVBpY2tlckhlYWRlcigpIHtcbiAgdmFyIF91c2VDb25maWcgPSB1c2VDb25maWcoKSxcbiAgICAgIGdldENvbmZpZyA9IF91c2VDb25maWcuZ2V0Q29uZmlnO1xuXG4gIHZhciBjdXJyZW50TG9jYWxlID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldENvbmZpZyhcImN1cnJlbnRMb2NhbGVcIik7XG4gIH0sIFtnZXRDb25maWddKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgbnVsbCwgd2Vla3NbY3VycmVudExvY2FsZV0ubWFwKGZ1bmN0aW9uICh3ZWVrRGF5LCBpbmRleCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAga2V5OiBpbmRleFxuICAgIH0sIHdlZWtEYXkpO1xuICB9KSkpO1xufTtcblxudmFyIERheVBpY2tlciA9IGZ1bmN0aW9uIERheVBpY2tlcihfcmVmKSB7XG4gIHZhciBzZWxlY3RlZERhdGUgPSBfcmVmLnNlbGVjdGVkRGF0ZSxcbiAgICAgIGNhbGVuZGVyRGF0ZSA9IF9yZWYuY2FsZW5kZXJEYXRlLFxuICAgICAgb25EYXlTZWxlY3QgPSBfcmVmLm9uRGF5U2VsZWN0O1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF5UGlja2VySGVhZGVyLCBudWxsKSwgUmVhY3QuY3JlYXRlRWxlbWVudChEYXlQaWNrZXJCb2R5LCB7XG4gICAgc2VsZWN0ZWREYXRlOiBzZWxlY3RlZERhdGUsXG4gICAgY2FsZW5kZXJEYXRlOiBjYWxlbmRlckRhdGUsXG4gICAgb25TZWxlY3Q6IG9uRGF5U2VsZWN0XG4gIH0pKTtcbn07XG5cbnZhciBDYWxlbmRlciA9IGZ1bmN0aW9uIENhbGVuZGVyKF9yZWYpIHtcbiAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZSxcbiAgICAgIGV2ZW50cyA9IF9yZWYuZXZlbnRzO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBpc0luaXRpYWxpemVkID0gX3VzZVN0YXRlWzBdLFxuICAgICAgc2V0SXNJbml0aWFsaXplZCA9IF91c2VTdGF0ZVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMiA9IHVzZVN0YXRlKHBhcnNlZERhdGVJbml0aWFsVmFsdWUpLFxuICAgICAgc2VsZWN0ZWREYXRlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFNlbGVjdGVkRGF0ZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShwYXJzZWREYXRlSW5pdGlhbFZhbHVlKSxcbiAgICAgIGNhbGVuZGVyRGF0ZSA9IF91c2VTdGF0ZTNbMF0sXG4gICAgICBzZXRDYWxlbmRlckRhdGUgPSBfdXNlU3RhdGUzWzFdO1xuXG4gIHZhciBfdXNlQ29uZmlnID0gdXNlQ29uZmlnKCksXG4gICAgICBnZXRDb25maWcgPSBfdXNlQ29uZmlnLmdldENvbmZpZztcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJzZWREYXRlVmFsdWUgPSBwYXJzZUJTRGF0ZSh2YWx1ZSk7XG4gICAgc2V0U2VsZWN0ZWREYXRlKHBhcnNlZERhdGVWYWx1ZSk7XG4gICAgc2V0Q2FsZW5kZXJEYXRlKHBhcnNlZERhdGVWYWx1ZSk7XG4gICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKTtcbiAgfSwgW3ZhbHVlXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIGV2ZW50cy5jaGFuZ2Uoc3RpdGNoRGF0ZSh7XG4gICAgICAgIHllYXI6IHNlbGVjdGVkRGF0ZS5ic1llYXIsXG4gICAgICAgIG1vbnRoOiBzZWxlY3RlZERhdGUuYnNNb250aCxcbiAgICAgICAgZGF5OiBzZWxlY3RlZERhdGUuYnNEYXlcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZERhdGUsIGlzSW5pdGlhbGl6ZWRdKTtcbiAgdmFyIG9uUHJldmlvdXNNb250aEhhbmRsZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgZXhlY3V0aW9uRGVsZWdhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRDYWxlbmRlckRhdGUoZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgdmFyIHllYXIgPSBkYXRlLmJzWWVhcjtcbiAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5ic01vbnRoIC0gMTtcblxuICAgICAgICBpZiAobW9udGggPCAxKSB7XG4gICAgICAgICAgbW9udGggPSAxMjtcbiAgICAgICAgICB5ZWFyLS07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoeWVhciA8IGdldENvbmZpZyhcIm1pblllYXJcIikgfHwgeWVhciA+IGdldENvbmZpZyhcIm1heFllYXJcIikpIHtcbiAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJzZUJTRGF0ZShzdGl0Y2hEYXRlKHtcbiAgICAgICAgICBkYXk6IGRhdGUuYnNEYXksXG4gICAgICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgICAgIHllYXI6IHllYXJcbiAgICAgICAgfSwgXCItXCIpKTtcbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChldmVudHMucHJldmlvdXNNb250aFNlbGVjdCkge1xuICAgICAgICBldmVudHMucHJldmlvdXNNb250aFNlbGVjdCh7XG4gICAgICAgICAgbW9udGg6IGNhbGVuZGVyRGF0ZS5ic01vbnRoLFxuICAgICAgICAgIHllYXI6IGNhbGVuZGVyRGF0ZS5ic1llYXJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKTtcbiAgdmFyIG9uTmV4dE1vbnRoQ2xpY2tIYW5kbGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGV4ZWN1dGlvbkRlbGVnYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgc2V0Q2FsZW5kZXJEYXRlKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHZhciB5ZWFyID0gZGF0ZS5ic1llYXI7XG4gICAgICAgIHZhciBtb250aCA9IGRhdGUuYnNNb250aCArIDE7XG5cbiAgICAgICAgaWYgKG1vbnRoID4gMTIpIHtcbiAgICAgICAgICBtb250aCA9IDE7XG4gICAgICAgICAgeWVhcisrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcnNlQlNEYXRlKHN0aXRjaERhdGUoe1xuICAgICAgICAgIGRheTogZGF0ZS5ic0RheSxcbiAgICAgICAgICBtb250aDogbW9udGgsXG4gICAgICAgICAgeWVhcjogeWVhclxuICAgICAgICB9LCBcIi1cIikpO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGV2ZW50cy5uZXh0TW9udGhTZWxlY3QpIHtcbiAgICAgICAgZXZlbnRzLm5leHRNb250aFNlbGVjdCh7XG4gICAgICAgICAgeWVhcjogY2FsZW5kZXJEYXRlLmJzWWVhcixcbiAgICAgICAgICBtb250aDogY2FsZW5kZXJEYXRlLmJzTW9udGhcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKTtcbiAgdmFyIG9uVG9kYXlDbGlja0hhbmRsZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvZGF5ID0gcGFyc2VCU0RhdGUoQURUb0JTKG5ldyBEYXRlKCkpKTtcbiAgICBleGVjdXRpb25EZWxlZ2F0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldENhbGVuZGVyRGF0ZSh0b2RheSk7XG4gICAgICBzZXRTZWxlY3RlZERhdGUodG9kYXkpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChldmVudHMudG9kYXlTZWxlY3QpIHtcbiAgICAgICAgZXZlbnRzLnRvZGF5U2VsZWN0KHtcbiAgICAgICAgICB5ZWFyOiB0b2RheS5ic1llYXIsXG4gICAgICAgICAgbW9udGg6IHRvZGF5LmJzTW9udGgsXG4gICAgICAgICAgZGF5OiB0b2RheS5ic0RheVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW10pO1xuICB2YXIgb25ZZWFyU2VsZWN0SGFuZGxlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICh5ZWFyKSB7XG4gICAgZXhlY3V0aW9uRGVsZWdhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRDYWxlbmRlckRhdGUocGFyc2VCU0RhdGUoc3RpdGNoRGF0ZSh7XG4gICAgICAgIHllYXI6IHllYXIsXG4gICAgICAgIG1vbnRoOiBjYWxlbmRlckRhdGUuYnNNb250aCxcbiAgICAgICAgZGF5OiBjYWxlbmRlckRhdGUuYnNEYXlcbiAgICAgIH0pKSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGV2ZW50cy55ZWFyU2VsZWN0KSB7XG4gICAgICAgIGV2ZW50cy55ZWFyU2VsZWN0KHllYXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbY2FsZW5kZXJEYXRlXSk7XG4gIHZhciBvbk1vbnRoU2VsZWN0SGFuZGxlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChtb250aCkge1xuICAgIGV4ZWN1dGlvbkRlbGVnYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgc2V0Q2FsZW5kZXJEYXRlKHBhcnNlQlNEYXRlKHN0aXRjaERhdGUoe1xuICAgICAgICB5ZWFyOiBjYWxlbmRlckRhdGUuYnNZZWFyLFxuICAgICAgICBtb250aDogbW9udGgsXG4gICAgICAgIGRheTogY2FsZW5kZXJEYXRlLmJzRGF5XG4gICAgICB9KSkpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChldmVudHMubW9udGhTZWxlY3QpIHtcbiAgICAgICAgZXZlbnRzLm1vbnRoU2VsZWN0KG1vbnRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2NhbGVuZGVyRGF0ZV0pO1xuICB2YXIgb25EYXlTZWxlY3RIYW5kbGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRhdGUpIHtcbiAgICBleGVjdXRpb25EZWxlZ2F0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBuZXdEYXRlID0gcGFyc2VCU0RhdGUoc3RpdGNoRGF0ZShkYXRlKSk7XG4gICAgICBzZXRDYWxlbmRlckRhdGUobmV3RGF0ZSk7XG4gICAgICBzZXRTZWxlY3RlZERhdGUobmV3RGF0ZSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGV2ZW50cy5kYXlTZWxlY3QpIHtcbiAgICAgICAgZXZlbnRzLmRheVNlbGVjdChkYXRlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiAnY2FsZW5kZXInXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogJ2NhbGVuZGFyLXdyYXBwZXInXG4gIH0sIGlzSW5pdGlhbGl6ZWQgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChDYWxlbmRlckNvbnRyb2xsZXIsIHtcbiAgICBvblByZXZpb3VzTW9udGg6IG9uUHJldmlvdXNNb250aEhhbmRsZXIsXG4gICAgb25OZXh0TW9udGg6IG9uTmV4dE1vbnRoQ2xpY2tIYW5kbGVyLFxuICAgIGNhbGVuZGVyRGF0ZTogY2FsZW5kZXJEYXRlLFxuICAgIG9uVG9kYXk6IG9uVG9kYXlDbGlja0hhbmRsZXIsXG4gICAgb25ZZWFyU2VsZWN0OiBvblllYXJTZWxlY3RIYW5kbGVyLFxuICAgIG9uTW9udGhTZWxlY3Q6IG9uTW9udGhTZWxlY3RIYW5kbGVyXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KERheVBpY2tlciwge1xuICAgIHNlbGVjdGVkRGF0ZTogc2VsZWN0ZWREYXRlLFxuICAgIGNhbGVuZGVyRGF0ZTogY2FsZW5kZXJEYXRlLFxuICAgIG9uRGF5U2VsZWN0OiBvbkRheVNlbGVjdEhhbmRsZXJcbiAgfSkpKSk7XG59O1xuXG52YXIgTmVwYWxpRGF0ZVBpY2tlciA9IGZ1bmN0aW9uIE5lcGFsaURhdGVQaWNrZXIocHJvcHMpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIGlucHV0Q2xhc3NOYW1lID0gcHJvcHMuaW5wdXRDbGFzc05hbWUsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgb25DaGFuZ2UgPSBwcm9wcy5vbkNoYW5nZSxcbiAgICAgIG9uU2VsZWN0ID0gcHJvcHMub25TZWxlY3QsXG4gICAgICBvcHRpb25zID0gcHJvcHMub3B0aW9ucztcbiAgdmFyIG5lcGFsaURhdGVQaWNrZXJXcmFwcGVyID0gdXNlUmVmKG51bGwpO1xuICB2YXIgbmVwYWxpRGF0ZVBpY2tlcklucHV0ID0gdXNlUmVmKG51bGwpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShcIlwiKSxcbiAgICAgIGRhdGUgPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXREYXRlID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUyID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgc2hvd0NhbGVuZGFyID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFNob3dDYWxlbmRhciA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VDb25maWcgPSB1c2VDb25maWcoKSxcbiAgICAgIHNldENvbmZpZyA9IF91c2VDb25maWcuc2V0Q29uZmlnLFxuICAgICAgZ2V0Q29uZmlnID0gX3VzZUNvbmZpZy5nZXRDb25maWc7XG5cbiAgdmFyIF91c2VUcmFucyA9IHVzZVRyYW5zKGdldENvbmZpZyhcImN1cnJlbnRMb2NhbGVcIikpLFxuICAgICAgbnVtYmVyVHJhbnMgPSBfdXNlVHJhbnMubnVtYmVyVHJhbnM7XG5cbiAgdmFyIHRvRW5nbGlzaCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gbnVtYmVyVHJhbnModmFsLCBFTkdMSVNIKTtcbiAgfSwgW10pO1xuICB2YXIgcmV0dXJuRGF0ZVZhbHVlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiBudW1iZXJUcmFucyh2YWwsIG9wdGlvbnMudmFsdWVMb2NhbGUpO1xuICB9LCBbb3B0aW9ucy52YWx1ZUxvY2FsZV0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNldENvbmZpZyhcImN1cnJlbnRMb2NhbGVcIiwgb3B0aW9ucy5jYWxlbmRlckxvY2FsZSk7XG4gIH0sIFtvcHRpb25zLmNhbGVuZGVyTG9jYWxlXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgc2V0RGF0ZSh0b0VuZ2xpc2godmFsdWUgfHwgQURUb0JTKG5ldyBEYXRlKCkpKSk7XG4gIH0sIFt2YWx1ZV0pO1xuICB2YXIgaGFuZGxlQ2xpY2tPdXRzaWRlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKG5lcGFsaURhdGVQaWNrZXJXcmFwcGVyLmN1cnJlbnQgJiYgY2hpbGRPZihldmVudC50YXJnZXQsIG5lcGFsaURhdGVQaWNrZXJXcmFwcGVyLmN1cnJlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2V0U2hvd0NhbGVuZGFyKGZhbHNlKTtcbiAgfSwgW10pO1xuICB1c2VMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG93Q2FsZW5kYXIpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIH07XG4gIH0sIFtzaG93Q2FsZW5kYXJdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvd0NhbGVuZGFyICYmIG5lcGFsaURhdGVQaWNrZXJXcmFwcGVyLmN1cnJlbnQpIHtcbiAgICAgIHZhciBuZXBhbGlEYXRlUGlja2VyID0gbmVwYWxpRGF0ZVBpY2tlcldyYXBwZXIuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB2YXIgY2FsZW5kZXIgPSBuZXBhbGlEYXRlUGlja2VyV3JhcHBlci5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsZW5kZXJcIik7XG5cbiAgICAgIGlmIChjYWxlbmRlcikge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgY2FsZW5kZXJIZWlnaHQgPSBjYWxlbmRlci5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgICBpZiAoY2FsZW5kZXJIZWlnaHQgKyBuZXBhbGlEYXRlUGlja2VyLmJvdHRvbSA+IHNjcmVlbkhlaWdodCkge1xuICAgICAgICAgICAgaWYgKGNhbGVuZGVySGVpZ2h0IDwgbmVwYWxpRGF0ZVBpY2tlci50b3ApIHtcbiAgICAgICAgICAgICAgY2FsZW5kZXIuc3R5bGUuYm90dG9tID0gbmVwYWxpRGF0ZVBpY2tlci5oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzaG93Q2FsZW5kYXJdKTtcbiAgdmFyIGhhbmRsZU9uQ2hhbmdlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGNoYW5nZWREYXRlKSB7XG4gICAgZXhlY3V0aW9uRGVsZWdhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBzZXREYXRlKGNoYW5nZWREYXRlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgICAgb25DaGFuZ2UocmV0dXJuRGF0ZVZhbHVlKGNoYW5nZWREYXRlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtvbkNoYW5nZV0pO1xuICB2YXIgaGFuZGxlT25EYXlTZWxlY3QgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoc2VsZWN0ZWREYXRlKSB7XG4gICAgZXhlY3V0aW9uRGVsZWdhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob3B0aW9ucy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgIHNldFNob3dDYWxlbmRhcihmYWxzZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG9uU2VsZWN0KSB7XG4gICAgICAgIG9uU2VsZWN0KHJldHVybkRhdGVWYWx1ZShzdGl0Y2hEYXRlKHNlbGVjdGVkRGF0ZSkpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW29uU2VsZWN0XSk7XG4gIHZhciBkYXRlcGlja2VyRXZlbnRzID0ge1xuICAgIGNoYW5nZTogaGFuZGxlT25DaGFuZ2UsXG4gICAgZGF5U2VsZWN0OiBoYW5kbGVPbkRheVNlbGVjdCxcbiAgICB0b2RheVNlbGVjdDogaGFuZGxlT25EYXlTZWxlY3RcbiAgfTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogbmVwYWxpRGF0ZVBpY2tlcldyYXBwZXIsXG4gICAgY2xhc3NOYW1lOiBcIm5lcGFsaS1kYXRlLXBpY2tlciBcIiArIGNsYXNzTmFtZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIHR5cGU6ICd0ZXh0JyxcbiAgICByZWY6IG5lcGFsaURhdGVQaWNrZXJJbnB1dCxcbiAgICBjbGFzc05hbWU6IGlucHV0Q2xhc3NOYW1lLFxuICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgIHZhbHVlOiBudW1iZXJUcmFucyhkYXRlKSxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHNldFNob3dDYWxlbmRhcihmdW5jdGlvbiAodmlzaWJsZSkge1xuICAgICAgICByZXR1cm4gIXZpc2libGU7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pLCBzaG93Q2FsZW5kYXIgJiYgZGF0ZSAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbGVuZGVyLCB7XG4gICAgdmFsdWU6IGRhdGUsXG4gICAgZXZlbnRzOiBkYXRlcGlja2VyRXZlbnRzXG4gIH0pKTtcbn07XG5cbnZhciBOZXBhbGlEYXRlUGlja2VyV3JhcHBlciA9IGZ1bmN0aW9uIE5lcGFsaURhdGVQaWNrZXJXcmFwcGVyKHByb3BzKSB7XG4gIHZhciBjYWxlbmRlck9wdGlvbnMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe1xuICAgICAgY2xvc2VPblNlbGVjdDogdHJ1ZSxcbiAgICAgIGNhbGVuZGVyTG9jYWxlOiBORVBBTEksXG4gICAgICB2YWx1ZUxvY2FsZTogRU5HTElTSFxuICAgIH0sIHByb3BzLm9wdGlvbnMpO1xuICB9LCBbcHJvcHMub3B0aW9uc10pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb25maWdQcm92aWRlciwge1xuICAgIG1heFllYXI6IHByb3BzLm1heFllYXIsXG4gICAgbWluWWVhcjogcHJvcHMubWluWWVhclxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KE5lcGFsaURhdGVQaWNrZXIsIE9iamVjdC5hc3NpZ24oe30sIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIG9wdGlvbnM6IGNhbGVuZGVyT3B0aW9uc1xuICB9KSkpKTtcbn07XG5cbk5lcGFsaURhdGVQaWNrZXJXcmFwcGVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgY2xhc3NOYW1lOiBcIlwiLFxuICBpbnB1dENsYXNzTmFtZTogXCJcIixcbiAgdmFsdWU6IFwiXCIsXG4gIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KCkge1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBvcHRpb25zOiB7fVxufTtcblxuZXhwb3J0IHsgTmVwYWxpRGF0ZVBpY2tlcldyYXBwZXIgYXMgTmVwYWxpRGF0ZVBpY2tlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubW9kZXJuLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nepali-datepicker-reactjs/dist/index.modern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nepali-datepicker-reactjs/dist/index.css":
/*!***************************************************************!*\
  !*** ./node_modules/nepali-datepicker-reactjs/dist/index.css ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"7c436db808e9\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmVwYWxpLWRhdGVwaWNrZXItcmVhY3Rqcy9kaXN0L2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyZWUtbmV4dGpzLWFkbWluLWRhc2hib2FyZC8uL25vZGVfbW9kdWxlcy9uZXBhbGktZGF0ZXBpY2tlci1yZWFjdGpzL2Rpc3QvaW5kZXguY3NzP2JiODciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI3YzQzNmRiODA4ZTlcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nepali-datepicker-reactjs/dist/index.css\n");

/***/ })

};
;