(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6821],{8972:function(e,t,s){Promise.resolve().then(s.bind(s,4810))},4810:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),l=s(9133),o=s(2270),i=s(8472),d=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,n]=(0,r.useState)([]),[m,u]=(0,r.useState)(""),[h,b]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(new Set),[k,v]=(0,r.useState)(!0),[j,y]=(0,r.useState)(!0),[w,N]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await i.Z.get("http://localhost:3000/committees");t(e.data),v(0===e.data.length)}catch(e){console.error("Error fetching committees:",e),v(!0)}})()},[]),(0,r.useEffect)(()=>{(async()=>{if(m)try{let e=await i.Z.get("http://localhost:3000/sub-committees/committee/".concat(m));l(e.data),y(0===e.data.length)}catch(e){console.error("Error fetching sub-committees:",e),y(!0)}else l([]),y(!0)})()},[m]),(0,r.useEffect)(()=>{(async()=>{try{let e="";if(h?e="http://localhost:3000/sub-level/sub-committee/".concat(h):m&&(e="http://localhost:3000/sub-level/committee/".concat(m)),!e){d([]),N(!0);return}let t=(await i.Z.get(e)).data.map(e=>e.levelId);if(t.length>0){let e=(await i.Z.get("http://localhost:3000/levels")).data.filter(e=>t.includes(e.levelId));d(e),N(0===e.length)}else d([]),N(!0)}catch(e){console.error("Error fetching levels:",e),d([]),N(!0)}})()},[m,h]),(0,r.useEffect)(()=>{(async()=>{try{let e=await i.Z.get("http://localhost:3000/positions");n(e.data)}catch(e){console.error("Error fetching positions:",e),n([])}})()},[]);let I=e=>{g(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},S=async e=>{e.preventDefault();let t={committeeId:parseInt(m,10),subCommitteeId:h?parseInt(h,10):null,levelId:parseInt(x,10),positionIds:Array.from(f)};try{await i.Z.post("http://localhost:3000/structures",t),console.log("Form submitted successfully"),u(""),b(""),p(""),g(new Set),l([]),d([])}catch(e){console.error("Error submitting form:",e)}};return(0,a.jsxs)("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[(0,a.jsx)("div",{className:"border-b border-stroke px-7 py-4 dark:border-strokedark",children:(0,a.jsx)("h3",{className:"font-medium text-black dark:text-white",children:"संरचना प्रविष्टी फारम"})}),(0,a.jsx)("div",{className:"p-7",children:(0,a.jsxs)("form",{onSubmit:S,children:[(0,a.jsxs)("div",{className:"mb-5.5",children:[(0,a.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"committee",children:"समिति चयन गर्नुहोस्:"}),(0,a.jsxs)("select",{id:"committee",value:m,onChange:e=>{u(e.target.value),b(""),d([]),g(new Set)},required:!0,disabled:k,className:"w-full rounded border border-stroke py-3 pl-4.5 pr-4.5 text-black focus:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white ".concat(k?"bg-gray-200 cursor-not-allowed":"bg-gray-50 hover:bg-gray-100 focus:border-primary"),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"समिति चयन गर्नुहोस्"}),e.map(e=>(0,a.jsx)("option",{value:e.committeeId.toString(),children:e.committeeName},e.committeeId))]})]}),(0,a.jsxs)("div",{className:"mb-5.5",children:[(0,a.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"subCommittee",children:"उपसमिति चयन गर्नुहोस्:"}),(0,a.jsxs)("select",{id:"subCommittee",value:h,onChange:e=>b(e.target.value),disabled:j,className:"w-full rounded border border-stroke py-3 pl-4.5 pr-4.5 text-black focus:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white ".concat(j?"bg-gray-200 cursor-not-allowed":"bg-gray-50 hover:bg-gray-100 focus:border-primary"),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"उपसमिति चयन गर्नुहोस्"}),s.map(e=>(0,a.jsx)("option",{value:e.subCommitteeId.toString(),children:e.subCommitteeName},e.subCommitteeId))]})]}),(0,a.jsxs)("div",{className:"mb-5.5",children:[(0,a.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"level",children:"तह चयन गर्नुहोस्:"}),(0,a.jsxs)("select",{id:"level",value:x,onChange:e=>p(e.target.value),disabled:w,className:"w-full rounded border border-stroke py-3 pl-4.5 pr-4.5 text-black focus:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white ".concat(w?"bg-gray-200 cursor-not-allowed":"bg-gray-50 hover:bg-gray-100 focus:border-primary"),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"तह चयन गर्नुहोस्"}),o.map(e=>(0,a.jsx)("option",{value:e.levelId.toString(),children:e.levelName},e.levelId))]})]}),(0,a.jsxs)("div",{className:"mb-5.5",children:[(0,a.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"positions",children:"पदहरु चयन गर्नुहोस्:"}),(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{id:"position-".concat(e.positionId),type:"checkbox",checked:f.has(e.positionId),onChange:()=>I(e.positionId),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"position-".concat(e.positionId),className:"text-sm text-black dark:text-white",children:e.positionName})]},e.positionId))})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"submit",className:"hover:bg-primary-dark rounded bg-primary px-6 py-2.5 text-sm font-medium text-white shadow-md",disabled:k,children:"सुरक्षित गर्नुहोस्"}),(0,a.jsx)("button",{type:"button",onClick:()=>{u(""),b(""),p(""),g(new Set),l([]),d([])},className:"bg-gray-200 hover:bg-gray-300 rounded px-6 py-2.5 text-sm font-medium text-black shadow-md",children:"रद्द गर्नुहोस्"})]})]})})]})},c=()=>(0,a.jsx)(l.default,{children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[(0,a.jsx)(o.Z,{pageName:"संरचना व्यवस्थापन"}),(0,a.jsx)("div",{className:"bg-white p-6 shadow sm:rounded-lg",children:(0,a.jsx)(d,{})})]})})},2270:function(e,t,s){"use strict";var a=s(7437),r=s(7138);t.Z=e=>{let{pageName:t}=e;return(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:t}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(r.default,{className:"font-medium",href:"/",children:"गृह पृष्ठ /"})}),(0,a.jsx)("li",{className:"font-medium text-primary",children:t})]})})]})}}},function(e){e.O(0,[5288,8472,9133,2971,7023,1744],function(){return e(e.s=8972)}),_N_E=e.O()}]);