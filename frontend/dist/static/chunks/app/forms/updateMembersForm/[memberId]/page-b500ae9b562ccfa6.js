(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3435],{6479:function(e,t,a){Promise.resolve().then(a.bind(a,6227))},6227:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var l=a(7437),s=a(2265),i=a(9133),r=a(2270),c=a(8472),o=a(9541),n=a(6463),m=e=>{let{memberId:t}=e,a=(0,n.useRouter)(),[i,r]=(0,s.useState)([]),[m,d]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[x,h]=(0,s.useState)([]),[p,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[k,w]=(0,s.useState)(""),[y,I]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[M,E]=(0,s.useState)(""),[F,T]=(0,s.useState)(""),[Z,D]=(0,s.useState)(""),[P,W]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{let e=await c.Z.get("http://localhost:3000/committees");console.log("Fetched committees:",e.data),r(e.data),console.log("memberId:",t)}catch(e){console.error("Error fetching committees:",e)}})()},[]),(0,s.useEffect)(()=>{console.log(t),t&&(async()=>{try{let e=(await c.Z.get("http://localhost:3000/members/".concat(t))).data;console.log("Fetched member:",e),f(e),v(e.committeeId||""),N(e.subCommitteeId||""),w(e.levelId||""),I(e.positionId||""),C(e.province||""),E(e.district||""),T(e.municipality||""),D(e.ward||""),W(e.remarks||"")}catch(e){console.error("Error fetching member data:",e)}})()},[t]),(0,s.useEffect)(()=>{(async()=>{if(g)try{let e=await c.Z.get("http://localhost:3000/sub-committees/committee/".concat(g));console.log("Fetched sub-committees:",e.data),d(e.data)}catch(e){console.error("Error fetching sub-committees:",e)}})()},[g]),(0,s.useEffect)(()=>{(async()=>{if(g||j)try{let e="";if(j?e="http://localhost:3000/sub-level/sub-committee/".concat(j):g&&(e="http://localhost:3000/sub-level/committee/".concat(g)),e){let t=(await c.Z.get(e)).data.map(e=>e.levelId);if(console.log("Fetched level IDs:",t),t.length>0){let e=(await c.Z.get("http://localhost:3000/levels")).data.filter(e=>t.includes(e.levelId));console.log("Filtered levels:",e),b(e)}else b([])}else b([])}catch(e){console.error("Error fetching levels:",e)}else b([])})()},[j,g]),(0,s.useEffect)(()=>{(async()=>{if(g||j)try{let e="";if(j?e="http://localhost:3000/structures/subcommittee/".concat(j):g&&(e="http://localhost:3000/structures/committee/".concat(g)),e){let t=(await c.Z.get(e)).data.map(e=>e.positionId);if(console.log("Fetched position IDs:",t),t.length>0){let e=t.map(e=>c.Z.get("http://localhost:3000/positions/".concat(e))),a=(await Promise.all(e)).map(e=>e.data);console.log("Filtered positions:",a),h(a)}else h([])}else h([])}catch(e){console.error("Error fetching positions:",e)}else h([])})()},[k]);let _=async e=>{if(e.preventDefault(),!p)return;let l={memberName:p.memberName,mobileNumber:p.mobileNumber,email:p.email,committeeId:""!==g?g:null,subCommitteeId:""!==j?j:null,levelId:""!==k?k:null,positionId:""!==y?y:null,province:S,district:M,municipality:F,ward:Z,remarks:P};console.log("Submitting payload:",l);try{await c.Z.put("http://localhost:3000/members/".concat(t),l),console.log("Member updated successfully"),a.push("/tables/membersTable")}catch(e){console.error("Error updating member:",e)}};return t&&p?(0,l.jsxs)("div",{className:"w-fit rounded border  bg-rose-100 shadow  dark:bg-boxdark",children:[(0,l.jsx)("div",{className:"rounded border-b bg-rose-200 px-7 py-4 shadow ",children:(0,l.jsx)("h3",{className:"font-medium text-black dark:text-white",children:"सदस्य विवरण अद्यावधिक गर्नुहोस्"})}),(0,l.jsx)("div",{className:"p-7",children:(0,l.jsxs)("form",{onSubmit:_,children:[(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"memberName",children:"नाम:"}),(0,l.jsx)("input",{type:"text",id:"memberName",value:p.memberName,onChange:e=>f(t=>t?{...t,memberName:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"mobileNumber",children:"मोबाइल नम्बर:"}),(0,l.jsx)("input",{type:"text",id:"mobileNumber",value:p.mobileNumber,onChange:e=>f(t=>t?{...t,mobileNumber:e.target.value}:null),required:!0,className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"email",children:"ईमेल:"}),(0,l.jsx)("input",{type:"text",id:"email",value:p.email,onChange:e=>f(t=>t?{...t,email:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"email",children:"प्रतिनिधि:"}),(0,l.jsx)("input",{type:"text",id:"email",value:p.email,onChange:e=>f(t=>t?{...t,email:e.target.value}:null),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"subCommittee",children:"ठेगाना:"}),(0,l.jsx)(o.Z,{initialProvince:p.province,initialDistrict:p.district,initialMunicipality:p.municipality,initialWard:p.ward,onAddressChange:e=>{console.log("Address change detected:",e),C(e.province),E(e.district),T(e.municipality),D(e.ward)}})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"committee",children:"समिति:"}),(0,l.jsxs)("select",{id:"committee",value:g,onChange:e=>v(Number(e.target.value)),className:"w-full rounded border bg-white px-4 py-2 ".concat(""===g?"text-gray-500":"text-black"),children:[(0,l.jsx)("option",{value:"",children:"समिति चयन गर्नुहोस्"}),i.map(e=>(0,l.jsx)("option",{value:e.committeeId,children:e.committeeName},e.committeeId))]})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"subCommittee",children:"उपसमिति:"}),(0,l.jsxs)("select",{id:"subCommittee",value:j,disabled:!g,onChange:e=>N(Number(e.target.value)),className:"w-full rounded border bg-white px-4 py-2 ".concat(""===j?"text-gray-500":"text-black").concat(g?"bg-white":"bg-gray-50 cursor-not-allowed"),children:[(0,l.jsx)("option",{value:"",children:"उपसमिति चयन गर्नुहोस्"}),m.map(e=>(0,l.jsx)("option",{value:e.subCommitteeId,children:e.subCommitteeName},e.subCommitteeId))]})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"level",children:"स्तर चयन गर्नुहोस्:"}),(0,l.jsxs)("select",{id:"level",value:k,onChange:e=>w(Number(e.target.value)),className:"border-gray-300 w-full rounded border px-4 py-2 text-black",children:[(0,l.jsx)("option",{value:"",children:"स्तर चयन गर्नुहोस्"}),u.map(e=>(0,l.jsx)("option",{value:e.levelId,children:e.levelName},e.levelId))]})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"positions",children:"स्थिति चयन गर्नुहोस्:"}),(0,l.jsx)("div",{className:"flex flex-wrap",children:x.length>0?x.map(e=>(0,l.jsxs)("div",{className:"mr-4",children:[(0,l.jsx)("input",{type:"checkbox",id:"position-".concat(e.positionId),value:e.positionId,checked:y===e.positionId,onChange:e=>{I(Number(e.target.value))}}),(0,l.jsx)("label",{htmlFor:"position-".concat(e.positionId),className:"ml-2 text-sm text-black dark:text-white",children:e.positionName})]},e.positionId)):(0,l.jsx)("div",{children:"Positions not available"})})]}),(0,l.jsxs)("div",{className:"mb-5.5",children:[(0,l.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",htmlFor:"remarks",children:"टिप्पणी:"}),(0,l.jsx)("textarea",{id:"remarks",value:P,onChange:e=>W(e.target.value),className:"border-gray-300 w-full rounded border px-4 py-2 text-black"})]}),(0,l.jsx)("button",{type:"submit",className:"w-full rounded bg-blue-500 py-2 text-white",children:"अद्यावधिक गर्नुहोस्"})]})})]}):(0,l.jsx)("div",{children:"Loading..."})},d=e=>{let{params:t}=e,a=Array.isArray(t.memberId)?t.memberId[0]:t.memberId;return(0,s.useEffect)(()=>{console.log("params from wrapper:",t.memberId),console.log("params:",t)},[]),(0,l.jsx)(i.default,{children:(0,l.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[(0,l.jsx)(r.Z,{pageName:"सदस्य विवरण अद्यावधिक गर्नुहोस्"}),(0,l.jsx)("div",{children:(0,l.jsx)(m,{memberId:a})})]})})}},9541:function(e,t,a){"use strict";var l=a(7437),s=a(2265);let i=async()=>{try{let[e,t,a,l]=await Promise.all([fetch("/map-province-districts.json"),fetch("/map-districts-municipalities.json"),fetch("/map-municipalities-wards.json"),fetch("/all-provinces.json")]),s=await e.json(),i=await t.json(),r=await a.json(),c=await l.json();return{provinceToDistrictsMap:s,districtsToMunicipalitiesMap:i,municipalitiesToWardsMap:r,allProvinces:c}}catch(e){return console.error("Error fetching address data:",e),{provinceToDistrictsMap:{},districtsToMunicipalitiesMap:{},municipalitiesToWardsMap:{},allProvinces:[]}}};t.Z=e=>{let{onAddressChange:t,initialProvince:a="",initialDistrict:r="",initialMunicipality:c="",initialWard:o=""}=e,[n,m]=(0,s.useState)(a),[d,u]=(0,s.useState)(r),[b,x]=(0,s.useState)(c),[h,p]=(0,s.useState)(o),[f,g]=(0,s.useState)({}),[v,j]=(0,s.useState)({}),[N,k]=(0,s.useState)({}),[w,y]=(0,s.useState)([]),[I,S]=(0,s.useState)([]),[C,M]=(0,s.useState)([]),[E,F]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(async()=>{let e=await i();g(e.provinceToDistrictsMap),j(e.districtsToMunicipalitiesMap),k(e.municipalitiesToWardsMap),y(e.allProvinces),a&&e.provinceToDistrictsMap[a]&&S(e.provinceToDistrictsMap[a]),r&&e.districtsToMunicipalitiesMap[r]&&M(e.districtsToMunicipalitiesMap[r]),c&&e.municipalitiesToWardsMap[c]&&F(e.municipalitiesToWardsMap[c])})()},[a,r,c]),(0,s.useEffect)(()=>{n?(S(f[n]||[]),r||(u(""),x(""),p(""),M([]),F([]))):(S([]),M([]),F([])),t({province:n,district:"",municipality:"",ward:""})},[n]),(0,s.useEffect)(()=>{d?(M(v[d]||[]),c||(x(""),p(""),F([]))):(M([]),F([])),t({province:n,district:d,municipality:"",ward:""})},[d]),(0,s.useEffect)(()=>{b?(F(N[b]||[]),o||p("")):F([]),t({province:n,district:d,municipality:b,ward:""})},[b]),(0,s.useEffect)(()=>{t({province:n,district:d,municipality:b,ward:h})},[h]),(0,l.jsx)("div",{className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"text-small mb-1 block rounded border border-black bg-slate-400 text-center font-medium text-black dark:text-white",children:"प्रदेश:"}),(0,l.jsxs)("select",{value:n,onChange:e=>m(e.target.value),className:"w-fit rounded border bg-white px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ".concat(""===n?"text-gray-500":"text-black"),children:[(0,l.jsx)("option",{value:"",className:"text-gray-500",children:"प्रदेश छान्नुहोस्"}),w.map(e=>(0,l.jsx)("option",{value:e,className:"text-black",children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"जिल्ला:"}),(0,l.jsxs)("select",{value:d,onChange:e=>u(e.target.value),disabled:!n,className:"w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ".concat(""===d?"text-gray-500":"text-black"," ").concat(n?"bg-white":"bg-gray-50 cursor-not-allowed"),children:[(0,l.jsx)("option",{value:"",className:"text-gray-500",children:"जिल्ला छान्नुहोस्"}),I.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"पालिका:"}),(0,l.jsxs)("select",{value:b,onChange:e=>x(e.target.value),disabled:!d,className:"w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none  dark:bg-meta-4 dark:text-white ".concat(""===b?"text-gray-500":"text-black"," ").concat(d?"bg-white":"bg-gray-50 cursor-not-allowed"),children:[(0,l.jsx)("option",{value:"",className:"text-gray-500",children:"पालिका छान्नुहोस्"}),C.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"text-small mb-1 block rounded border bg-slate-400 text-center font-medium text-black dark:text-white",children:"वडा:"}),(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),disabled:!b,className:"w-fit rounded border px-4.5 py-3 text-sm shadow focus:border-primary focus:outline-none dark:bg-meta-4 dark:text-white ".concat(""===h?"text-gray-500":"text-black"," ").concat(b?"bg-white":"bg-gray-50 cursor-not-allowed"),children:[(0,l.jsx)("option",{value:"",className:"text-gray-500",children:"वडा छान्नुहोस्"}),E.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]})})}},2270:function(e,t,a){"use strict";var l=a(7437),s=a(7138);t.Z=e=>{let{pageName:t}=e;return(0,l.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:t}),(0,l.jsx)("nav",{children:(0,l.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,l.jsx)("li",{children:(0,l.jsx)(s.default,{className:"font-medium",href:"/",children:"गृह पृष्ठ /"})}),(0,l.jsx)("li",{className:"font-medium text-primary",children:t})]})})]})}}},function(e){e.O(0,[5288,8472,9133,2971,7023,1744],function(){return e(e.s=6479)}),_N_E=e.O()}]);