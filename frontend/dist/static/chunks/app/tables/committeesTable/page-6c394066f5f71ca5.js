(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3399],{4014:function(e,t,a){Promise.resolve().then(a.bind(a,4664))},4664:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),l=a(2265),c=a(9133),i=a(2270),d=a(8472),r=()=>{let[e,t]=(0,l.useState)([]),[a,c]=(0,l.useState)({}),[i,r]=(0,l.useState)({}),[m,o]=(0,l.useState)([]),[n,x]=(0,l.useState)([]),[h,p]=(0,l.useState)({}),[u,j]=(0,l.useState)(!0),[b,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{j(!0),N(null);let e=await d.Z.get("http://localhost:3000/committees");t(e.data);let s=(await d.Z.get("http://localhost:3000/levels")).data.reduce((e,t)=>({...e,[t.levelId]:t.levelName}),{});r(s);let l=(await Promise.all(e.data.map(async e=>{try{let t=await d.Z.get("http://localhost:3000/sub-committees/committee/".concat(e.committeeId));return{[e.committeeId]:t.data}}catch(t){return{[e.committeeId]:[]}}}))).reduce((e,t)=>({...e,...t}),{});c(l);let i=await d.Z.get("http://localhost:3000/sub-level");o(i.data);let m=await Promise.all(e.data.flatMap(async e=>{try{var t;let s=(await d.Z.get("http://localhost:3000/structures/committee/".concat(e.committeeId))).data,l=(await Promise.all((null===(t=a[e.committeeId])||void 0===t?void 0:t.map(async e=>d.Z.get("http://localhost:3000/structures/subcommittee/".concat(e.subCommitteeId))))||[])).flatMap(e=>e.data);return[...s,...l]}catch(e){return[]}}));x(m.flat());let n=Array.from(new Set(m.flat().map(e=>e.positionId))),h=(await Promise.all(n.map(e=>d.Z.get("http://localhost:3000/positions/".concat(e))))).reduce((e,t)=>({...e,[t.data.positionId]:t.data.positionName}),{});p(h)}catch(e){console.error("Error fetching data:",e),N("Failed to load data.")}finally{j(!1)}})()},[]);let k=(e,t)=>m.filter(a=>a.committeeId===e&&(null===t||a.subCommitteeId===t)).map(e=>i[e.levelId]||"-").join(", ")||"-",f=(e,t)=>n.filter(a=>a.committeeId===e&&(null===t||a.subCommitteeId===t)).map(e=>h[e.positionId]||"-").join(", ")||"-";return u?(0,s.jsx)("p",{children:"Loading data..."}):b?(0,s.jsx)("p",{className:"text-red-500",children:b}):(0,s.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pb-2.5 pt-6 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[(0,s.jsx)("h4",{className:"mb-6 text-xl font-semibold text-black dark:text-white",children:"समिति तालिका"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"grid grid-cols-8 rounded-sm bg-gray-2 dark:bg-meta-4",children:["क्रम संख्या","समिति आईडी","समिति को नाम","उपसमिति","तह","सचर् सूची / सदस्य संख्या / स्थिति","सम्पादन/हेर्नु/हटाउनु","रिपोर्ट निर्यात गर्नुहोस्"].map((e,t)=>(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("h5",{className:"text-sm font-medium uppercase xsm:text-base",children:e})},t))}),e.map((t,l)=>{var c;return(0,s.jsxs)("div",{className:"grid grid-cols-8 ".concat(l===e.length-1?"":"border-b border-stroke dark:border-strokedark"),children:[(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:l+1})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:t.committeeId})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:t.committeeName})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:(null===(c=a[t.committeeId])||void 0===c?void 0:c.map(e=>e.subCommitteeName).join(", "))||"-"})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:k(t.committeeId,null)})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:f(t.committeeId,null)})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:"-"})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:"-"})}),(0,s.jsx)("div",{className:"p-2.5 xl:p-5",children:(0,s.jsx)("p",{className:"text-black dark:text-white",children:"-"})})]},t.committeeId)})]})]})},m=()=>(0,s.jsx)(c.default,{children:(0,s.jsxs)("div",{className:"max-w-800 mx-auto px-4 py-8",children:[(0,s.jsx)(i.Z,{pageName:"समिति तालिका"}),(0,s.jsx)("div",{className:"bg-white p-6 shadow sm:rounded-lg",children:(0,s.jsx)(r,{})})]})})},2270:function(e,t,a){"use strict";var s=a(7437),l=a(7138);t.Z=e=>{let{pageName:t}=e;return(0,s.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:t}),(0,s.jsx)("nav",{children:(0,s.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)(l.default,{className:"font-medium",href:"/",children:"गृह पृष्ठ /"})}),(0,s.jsx)("li",{className:"font-medium text-primary",children:t})]})})]})}}},function(e){e.O(0,[5288,8472,9133,2971,7023,1744],function(){return e(e.s=4014)}),_N_E=e.O()}]);